{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nimport store from '@/store';\nimport router from '@/router';\nimport HeaderComponent from '@/components/HeaderComponent.vue';\nimport FooterComponent from '@/components/FooterComponent.vue';\nconst emaiRegex = new RegExp(/^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/);\n// nice icons from: https://www.flaticon.com/free-icons/user\nconst apiEndpoint = 'https://access.qbits.mx/api/login';\nexport default {\n  components: {\n    HeaderComponent,\n    FooterComponent\n  },\n  data: function () {\n    return {\n      fieldUser: '',\n      fieldPassword: '',\n      usrErrorMsgClass: 'error-free',\n      passErrorMsgClass: 'error-free',\n      errorText: '',\n      eye: 'open-eye',\n      credential: 'password'\n    };\n  },\n  watch: {\n    fieldUser() {\n      this.usrErrorMsgClass = \"error-free\";\n      var flagBadMail = this.fieldUser.length < 30 && !emaiRegex.test(this.fieldUser);\n      if (flagBadMail) this.usrErrorMsgClass = \"err-msg\";\n    },\n    fieldPassword() {\n      this.passErrorMsgClass = \"error-free\";\n      var flagBadMail = this.fieldPassword.length < 5;\n      if (flagBadMail) this.passErrorMsgClass = \"err-msg\";\n    }\n  },\n  computed: {\n    inhabilitado() {\n      var b = this.fieldUser.length > 0 && this.fieldPassword.length > 0 && this.usrErrorMsgClass == \"error-free\" && this.passErrorMsgClass == \"error-free\";\n      return !b;\n    },\n    computed: {\n      username() {\n        return this.$store.state.userData.username;\n      }\n    }\n  },\n  methods: {\n    toogle: function () {\n      if (this.eye == 'close-eye') {\n        this.eye = 'open-eye';\n        this.credential = 'password';\n      } else {\n        this.eye = 'close-eye';\n        this.credential = 'text';\n      }\n    },\n    ckCredentials: function () {\n      axios.post(apiEndpoint, {\n        user: this.fieldUser,\n        cred: this.fieldPassword\n      }).then(response => {\n        var ud = response.data;\n        store.commcheit(\"setUserData\", ud);\n        const target = this.detecta(store.state.userData.role);\n        router.push(target);\n      }).catch(error => {\n        this.errorText = error.response ? error.response.data.exceptionLongDescription : error;\n        this.$refs.message01.presenta();\n      });\n    },\n    detecta: function (roles) {\n      if (store.state.destination.length > 0) {\n        var target = store.state.destination;\n        store.commit('setDestination', '');\n        return target;\n      }\n      if (typeof roles === 'string') {\n        return '/';\n      } else {\n        for (var i = 0; i < roles.length; i++) {\n          switch (roles[i].nombre) {\n            case 'admin':\n              return '/ui/admin';\n            // rol 1 = administrador\n            case 'user':\n              return '/';\n            // rol 2 = usuario comun y corriente\n            case 'normal':\n              return '/';\n            // rol 2 = usuario comun y corriente\n            default:\n              return '/';\n            // otro rol cualquiera\n          }\n        } // ends for cycle with switch inside\n      }\n    }\n  }\n};","map":{"version":3,"names":["axios","store","router","HeaderComponent","FooterComponent","emaiRegex","RegExp","apiEndpoint","components","data","fieldUser","fieldPassword","usrErrorMsgClass","passErrorMsgClass","errorText","eye","credential","watch","flagBadMail","length","test","computed","inhabilitado","b","username","$store","state","userData","methods","toogle","ckCredentials","post","user","cred","then","response","ud","commcheit","target","detecta","role","push","catch","error","exceptionLongDescription","$refs","message01","presenta","roles","destination","commit","i","nombre"],"sources":["/home/ubuntu/development/code/Proyecto Chambeaya/src/views/LoginView.vue"],"sourcesContent":["<template>\n    <body>\n        <div>\n            <HeaderComponent />\n            <main class=\"container pb-5 hoja\">\n                <div class=\"card ancho\">\n                    <div class=\"card-body text-align-left\">\n                        <div class=\"row\">\n                            <div class=\"col\">\n                                <h1>Login</h1>\n                            </div>\n                        </div>\n                        <div class=\"row\">\n                            <div class=\"col\">\n                                <input type=\"text\" class=\"form-control icon-user\" id=\"text-usr\" v-model=\"fieldUser\"\n                                    placeholder=\"william@email.com\" />\n                                <span :class=\"usrErrorMsgClass\">Formato de correo inválido</span>\n                            </div>\n                        </div>\n                        <div class=\"row\">\n                            <div class=\"col\">\n                                <div class=\"d-flex justify-content-between\">\n                                    <input :type=\"credential\" class=\"form-control icon-key\" id=\"text-usr\"\n                                        v-model=\"fieldPassword\" placeholder=\"******\" />\n                                    <a :class=\"eye\" href=\"#\" @click=\"toogle\"></a>\n                                </div>\n                                <span :class=\"passErrorMsgClass\">Formato de clave inválido</span>\n                            </div>\n                        </div>\n                        <div class=\"row\">\n                            <div class=\"col\" style=\"text-align: right;\">\n                                <a class=\"liga\" href=\"/ui/forgot\">Forgot password ?</a>\n                            </div>\n                        </div>\n                        <hr />\n                        <div class=\"row\">\n                            <div class=\"col\">\n                                <div class=\"d-flex justify-content-between\">\n                                    <button class=\"btn btn-success\" :disabled=inhabilitado\n                                        @click=\"checkCredentials\">Login</button>\n                                    <a class=\"btn btn-warning\" href=\"/ui/register\">Register</a>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                <MessageComponent \n                ref=\"message01\" \n                alertType=3 \n                duration=4000 \n                :text=errorText iconType=1\n                    style=\"max-width: 600px;\" />\n\n            </main>\n            <FooterComponent class=\"down\" />\n        </div>\n    </body>\n</template>\n\n<script>\nimport axios from 'axios'\nimport store from '@/store'\nimport router from '@/router'\nimport HeaderComponent from '@/components/HeaderComponent.vue'\nimport FooterComponent from '@/components/FooterComponent.vue'\n\n\nconst emaiRegex = new RegExp(/^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/);\n// nice icons from: https://www.flaticon.com/free-icons/user\nconst apiEndpoint = 'https://access.qbits.mx/api/login'\n\nexport default {\n    components: {\n        HeaderComponent,\n        FooterComponent,\n    },\n    data: function () {\n        return {\n            fieldUser: '',\n            fieldPassword: '',\n            usrErrorMsgClass: 'error-free',\n            passErrorMsgClass: 'error-free',\n            errorText: '',\n            eye: 'open-eye',\n            credential: 'password'\n        }\n    },\n    watch: {\n        fieldUser() {\n            this.usrErrorMsgClass = \"error-free\"\n            var flagBadMail = this.fieldUser.length < 30 && !emaiRegex.test(this.fieldUser)\n            if (flagBadMail) this.usrErrorMsgClass = \"err-msg\"\n        },\n        fieldPassword() {\n            this.passErrorMsgClass = \"error-free\"\n            var flagBadMail = this.fieldPassword.length < 5\n            if (flagBadMail) this.passErrorMsgClass = \"err-msg\"\n        }\n    },\n    computed: {\n        inhabilitado() {\n            var b =\n                this.fieldUser.length > 0 &&\n                this.fieldPassword.length > 0 &&\n                this.usrErrorMsgClass == \"error-free\" &&\n                this.passErrorMsgClass == \"error-free\"\n            return !b\n        },\n        computed: {\n    username() {\n        return this.$store.state.userData.username;\n    }\n}\n    },\n    methods: {\n        toogle: function () {\n            if (this.eye == 'close-eye') {\n                this.eye = 'open-eye'\n                this.credential = 'password'\n            } else {\n                this.eye = 'close-eye'\n                this.credential = 'text'\n            }\n        },\n        ckCredentials: function () {\n            axios.post(apiEndpoint, {\n                user: this.fieldUser,\n                cred: this.fieldPassword\n            }).then(response => {\n                var ud = response.data;\n                store.commcheit(\"setUserData\", ud);\n                const target = this.detecta(store.state.userData.role);\n                router.push(target);\n            }).catch(error => {\n                this.errorText = error.response ? error.response.data.exceptionLongDescription : error\n                this.$refs.message01.presenta()\n            })\n        },\n        detecta: function (roles) {\n            if (store.state.destination.length > 0) {\n                var target = store.state.destination;\n                store.commit('setDestination', '');\n                return target;\n            }\n            if (typeof roles === 'string') {\n                return '/';\n            } else {\n                for (var i = 0; i < roles.length; i++) {\n                    switch (roles[i].nombre) {\n                        case 'admin': return '/ui/admin'; // rol 1 = administrador\n                        case 'user': return '/'; // rol 2 = usuario comun y corriente\n                        case 'normal': return '/'; // rol 2 = usuario comun y corriente\n                        default: return '/'; // otro rol cualquiera\n                    }\n                } // ends for cycle with switch inside\n            }\n        },\n    }\n}\n</script>\n\n<style scoped>\n.open-eye {\n    background: url(\"@/assets/eye-open.png\") no-repeat left;\n    background-size: 14px;\n    width: 20px;\n    margin-left: 8px;\n}\n\n.close-eye {\n    background: url(\"@/assets/eye-close.png\") no-repeat left;\n    background-size: 14px;\n    width: 20px;\n    margin-left: 8px;\n}\n\n.error-free {\n    color: transparent;\n}\n\n.err-msg {\n    color: red;\n}\n\n.icon-user {\n    padding-left: 30px;\n    background: url(\"@/assets/user.png\") no-repeat left;\n    background-size: 14px;\n    background-position: 2%50%;\n}\n\n.icon-key {\n    padding-left: 30px;\n    background: url(\"@/assets/key.png\") no-repeat left;\n    background-size: 14px;\n    background-position: 2%50%;\n}\n\n.ancho {\n    max-width: 380px;\n    margin: auto;\n    margin-top: 100px;\n}\n\n.text-align-left {\n    text-align: left;\n}\n\n.liga {\n    text-decoration: none;\n}\n\n.liga:hover {\n    text-decoration: underline;\n}\n\n.color1 {\n    background-color: #D8CFB5;\n}\n\n.color2 {\n    background-color: #CDC3A7;\n}\n\n.color3 {\n    background-color: #E0D8B0;\n}\n\n.color4 {\n    background-color: red;\n}\n\n.color5 {\n    background-color: #CCB9A5;\n}\n\n.color6 {\n    background-color: #C3B091;\n}\n\n.tam {\n    width: 100%;\n    height: 1200px;\n}\n\nbody {\n    background-image: url('../assets/oficios.jpg');\n    background-size: cover;\n    position: relative;\n}\n\n\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}