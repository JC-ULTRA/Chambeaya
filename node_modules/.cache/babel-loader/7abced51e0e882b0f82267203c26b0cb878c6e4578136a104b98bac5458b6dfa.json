{"ast":null,"code":"import axios from 'axios';\nimport store from '@/store';\nimport { VueRecaptcha } from \"vue-recaptcha\";\nimport AvisoComponent from '@/components/AvisoWindow.vue';\nconst emailRegex = new RegExp(/^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/);\nconst HTTP_STATUS = {\n  OK: 200,\n  FORBIDDEN: 403\n};\nexport default {\n  data() {\n    return {\n      email: '',\n      msg: '',\n      destino: '',\n      errorText: ''\n    };\n  },\n  components: {\n    VueRecaptcha\n  },\n  mounted() {\n    store.commit('setDestination', '/ui/results');\n  },\n  methods: {\n    enviar: function () {\n      if (!emailRegex.test(this.email)) {\n        this.errorText = \"Formato de correo inválido\";\n        this.$refs.message01.presenta();\n        return;\n      }\n      axios.get(\"https://access.qbits.mx/api/forgot-password-request\", {\n        headers: {\n          test: 'ok'\n        },\n        params: {\n          email: this.email\n        }\n      }).then(response => {\n        response;\n        store.commit('setDestination', '/ui/forgot-confirm');\n        this.msg = 'Te hemos enviado un correo con un token de recuperación.';\n        this.destino = '/ui/forgot-confirm';\n        this.$refs.avisoWindow.openModal();\n      }).catch(error => {\n        error;\n        this.msg = error.response;\n        this.destino = '';\n        this.$refs.avisoWindow.openModal();\n      });\n    },\n    onCaptchaVerified(recaptchaToken) {\n      this.captcha = false;\n      axios.post(\"https://access.qbits.mx/api/check-captcha\", {\n        response: recaptchaToken,\n        ip: \"127.0.0.1\"\n      }).then(response => {\n        if (response.status === HTTP_STATUS.OK) {\n          this.captcha = true;\n        } else {\n          this.msgErr = \"Regreso con un estatus: \" + response.status;\n        }\n      }).catch(error => {\n        console.log(error.data);\n        this.msgErr = \"Ha ocurrido un error de red: \" + error;\n      }).finally(() => console.log('this.loading = false'));\n    },\n    onCaptchaExpired() {\n      this.captcha = false;\n      this.$refs.recaptcha.reset();\n    }\n  }\n};","map":{"version":3,"names":["axios","store","VueRecaptcha","AvisoComponent","emailRegex","RegExp","HTTP_STATUS","OK","FORBIDDEN","data","email","msg","destino","errorText","components","mounted","commit","methods","enviar","test","$refs","message01","presenta","get","headers","params","then","response","avisoWindow","openModal","catch","error","onCaptchaVerified","recaptchaToken","captcha","post","ip","status","msgErr","console","log","finally","onCaptchaExpired","recaptcha","reset"],"sources":["/home/ubuntu/development/code/Proyecto Chambeaya/src/views/ForgotPassView.vue"],"sourcesContent":["<template>\n    <div class=\"content\">\n\n        <div class=\"card ancho\">\n            <div class=\"card-header\">\n                <h1>Recuperación de clave</h1>\n            </div>\n            <div class=\"card-body\">\n                <p>Captura tu correo</p>\n                <input type=\"text\" v-model=\"email\" />\n                <br />\n                <div class=\"row\">\n                    <vue-recaptcha id=\"solvecaptcha\" ref=\"recaptcha\" sitekey=\"6LetXssSAAAAAF7WikI044mAdOiyyKPUxkklqMtN\"\n                        @expired=\"onCaptchaExpired\" @verify=\"onCaptchaVerified\" />\n                </div>\n            </div>\n            <div class=\"card-footer\">\n                <div class=\"d-flex justify-content-between\">\n                    <button class=\"btn btn-success\" @click=\"enviar\">Enviar</button>\n                    <a class=\"btn btn-warning\" href=\"/ui/login\">Regresar a login</a>\n                </div>\n            </div>\n        </div>\n        <MessageComponent ref=\"message01\" alertType=3 duration=4000 :text=errorText iconType=1 style=\"max-width: 600px;\" />\n\n        <AvisoWindow ref=\"avisoWindow\" avisoTitulo=\"Recuperación de clave\" :avisoMsg=msg :target=destino />\n        <FooterComponent class=\"down\" />\n    </div>\n</template>\n\n<script>\nimport axios from 'axios'\nimport store from '@/store'\nimport { VueRecaptcha } from \"vue-recaptcha\";\nimport AvisoComponent from '@/components/AvisoWindow.vue'\n\nconst emailRegex = new RegExp(/^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/);\n\nconst HTTP_STATUS = {\n    OK: 200,\n    FORBIDDEN: 403,\n};\n\nexport default {\n    \n    data() {\n        return {\n            email: '',\n            msg: '',\n            destino: '',\n            errorText: ''\n        }\n    },\n    components: {\n        VueRecaptcha\n    },\n    mounted() {\n        store.commit('setDestination', '/ui/results')\n    },\n    methods: {\n        enviar: function () {\n            if (!emailRegex.test(this.email)) {\n                this.errorText = \"Formato de correo inválido\"\n                this.$refs.message01.presenta()\n                return\n            }\n            axios.get(\"https://access.qbits.mx/api/forgot-password-request\", {\n                headers: { test: 'ok' },\n                params: { email: this.email }\n            })\n                .then(response => {\n                    response;\n                    store.commit('setDestination', '/ui/forgot-confirm')\n                    this.msg = 'Te hemos enviado un correo con un token de recuperación.'\n                    this.destino = '/ui/forgot-confirm'\n                    this.$refs.avisoWindow.openModal()\n                })\n                .catch(error => {\n                    error;\n                    this.msg = error.response\n                    this.destino = ''\n                    this.$refs.avisoWindow.openModal()\n                })\n        },\n        onCaptchaVerified(recaptchaToken) {\n            this.captcha = false;\n            axios.post(\"https://access.qbits.mx/api/check-captcha\", {\n                response: recaptchaToken,\n                ip: \"127.0.0.1\",\n            }).then((response) => {\n                if (response.status === HTTP_STATUS.OK) {\n                    this.captcha = true;\n                } else {\n                    this.msgErr = \"Regreso con un estatus: \" + response.status;\n                }\n            }).catch((error) => {\n                console.log(error.data);\n                this.msgErr = \"Ha ocurrido un error de red: \" + error;\n            }).finally(() => (console.log('this.loading = false')));\n        },\n        onCaptchaExpired() {\n            this.captcha = false;\n            this.$refs.recaptcha.reset();\n        },\n    }\n}\n</script>\n\n<style scoped>\n.ancho {\n    max-width: 600px;\n    margin: auto;\n    margin-top: 100px;\n}\n</style>"],"mappings":"AA+BA,OAAOA,KAAI,MAAO,OAAM;AACxB,OAAOC,KAAI,MAAO,SAAQ;AAC1B,SAASC,YAAW,QAAS,eAAe;AAC5C,OAAOC,cAAa,MAAO,8BAA6B;AAExD,MAAMC,UAAS,GAAI,IAAIC,MAAM,CAAC,uJAAuJ,CAAC;AAEtL,MAAMC,WAAU,GAAI;EAChBC,EAAE,EAAE,GAAG;EACPC,SAAS,EAAE;AACf,CAAC;AAED,eAAe;EAEXC,IAAIA,CAAA,EAAG;IACH,OAAO;MACHC,KAAK,EAAE,EAAE;MACTC,GAAG,EAAE,EAAE;MACPC,OAAO,EAAE,EAAE;MACXC,SAAS,EAAE;IACf;EACJ,CAAC;EACDC,UAAU,EAAE;IACRZ;EACJ,CAAC;EACDa,OAAOA,CAAA,EAAG;IACNd,KAAK,CAACe,MAAM,CAAC,gBAAgB,EAAE,aAAa;EAChD,CAAC;EACDC,OAAO,EAAE;IACLC,MAAM,EAAE,SAAAA,CAAA,EAAY;MAChB,IAAI,CAACd,UAAU,CAACe,IAAI,CAAC,IAAI,CAACT,KAAK,CAAC,EAAE;QAC9B,IAAI,CAACG,SAAQ,GAAI,4BAA2B;QAC5C,IAAI,CAACO,KAAK,CAACC,SAAS,CAACC,QAAQ,EAAC;QAC9B;MACJ;MACAtB,KAAK,CAACuB,GAAG,CAAC,qDAAqD,EAAE;QAC7DC,OAAO,EAAE;UAAEL,IAAI,EAAE;QAAK,CAAC;QACvBM,MAAM,EAAE;UAAEf,KAAK,EAAE,IAAI,CAACA;QAAM;MAChC,CAAC,EACIgB,IAAI,CAACC,QAAO,IAAK;QACdA,QAAQ;QACR1B,KAAK,CAACe,MAAM,CAAC,gBAAgB,EAAE,oBAAoB;QACnD,IAAI,CAACL,GAAE,GAAI,0DAAyD;QACpE,IAAI,CAACC,OAAM,GAAI,oBAAmB;QAClC,IAAI,CAACQ,KAAK,CAACQ,WAAW,CAACC,SAAS,EAAC;MACrC,CAAC,EACAC,KAAK,CAACC,KAAI,IAAK;QACZA,KAAK;QACL,IAAI,CAACpB,GAAE,GAAIoB,KAAK,CAACJ,QAAO;QACxB,IAAI,CAACf,OAAM,GAAI,EAAC;QAChB,IAAI,CAACQ,KAAK,CAACQ,WAAW,CAACC,SAAS,EAAC;MACrC,CAAC;IACT,CAAC;IACDG,iBAAiBA,CAACC,cAAc,EAAE;MAC9B,IAAI,CAACC,OAAM,GAAI,KAAK;MACpBlC,KAAK,CAACmC,IAAI,CAAC,2CAA2C,EAAE;QACpDR,QAAQ,EAAEM,cAAc;QACxBG,EAAE,EAAE;MACR,CAAC,CAAC,CAACV,IAAI,CAAEC,QAAQ,IAAK;QAClB,IAAIA,QAAQ,CAACU,MAAK,KAAM/B,WAAW,CAACC,EAAE,EAAE;UACpC,IAAI,CAAC2B,OAAM,GAAI,IAAI;QACvB,OAAO;UACH,IAAI,CAACI,MAAK,GAAI,0BAAyB,GAAIX,QAAQ,CAACU,MAAM;QAC9D;MACJ,CAAC,CAAC,CAACP,KAAK,CAAEC,KAAK,IAAK;QAChBQ,OAAO,CAACC,GAAG,CAACT,KAAK,CAACtB,IAAI,CAAC;QACvB,IAAI,CAAC6B,MAAK,GAAI,+BAA8B,GAAIP,KAAK;MACzD,CAAC,CAAC,CAACU,OAAO,CAAC,MAAOF,OAAO,CAACC,GAAG,CAAC,sBAAsB,CAAE,CAAC;IAC3D,CAAC;IACDE,gBAAgBA,CAAA,EAAG;MACf,IAAI,CAACR,OAAM,GAAI,KAAK;MACpB,IAAI,CAACd,KAAK,CAACuB,SAAS,CAACC,KAAK,EAAE;IAChC;EACJ;AACJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}