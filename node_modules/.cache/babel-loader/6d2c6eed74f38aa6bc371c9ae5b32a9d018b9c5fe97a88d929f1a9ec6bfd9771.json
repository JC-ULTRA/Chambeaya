{"ast":null,"code":"\"use strict\";\n\nrequire(\"core-js/modules/es.regexp.flags.js\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst codegen_1 = require(\"ajv/dist/compile/codegen\");\nconst _util_1 = require(\"./_util\");\nconst regexpMetaSchema = {\n  type: \"object\",\n  properties: {\n    pattern: {\n      type: \"string\"\n    },\n    flags: {\n      type: \"string\",\n      nullable: true\n    }\n  },\n  required: [\"pattern\"],\n  additionalProperties: false\n};\nconst metaRegexp = /^\\/(.*)\\/([gimuy]*)$/;\nfunction getDef() {\n  return {\n    keyword: \"regexp\",\n    type: \"string\",\n    schemaType: [\"string\", \"object\"],\n    code(cxt) {\n      const {\n        data,\n        schema\n      } = cxt;\n      const regx = getRegExp(schema);\n      cxt.pass((0, codegen_1._)`${regx}.test(${data})`);\n      function getRegExp(sch) {\n        if (typeof sch == \"object\") return (0, _util_1.usePattern)(cxt, sch.pattern, sch.flags);\n        const rx = metaRegexp.exec(sch);\n        if (rx) return (0, _util_1.usePattern)(cxt, rx[1], rx[2]);\n        throw new Error(\"cannot parse string into RegExp\");\n      }\n    },\n    metaSchema: {\n      anyOf: [{\n        type: \"string\"\n      }, regexpMetaSchema]\n    }\n  };\n}\nexports.default = getDef;\nmodule.exports = getDef;","map":{"version":3,"names":["codegen_1","require","_util_1","regexpMetaSchema","type","properties","pattern","flags","nullable","required","additionalProperties","metaRegexp","getDef","keyword","schemaType","code","cxt","data","schema","regx","getRegExp","pass","_","sch","usePattern","rx","exec","Error","metaSchema","anyOf","exports","default","module"],"sources":["../../src/definitions/regexp.ts"],"sourcesContent":[null],"mappings":";;;;;;AACA,MAAAA,SAAA,GAAAC,OAAA;AACA,MAAAC,OAAA,GAAAD,OAAA;AAOA,MAAME,gBAAgB,GAAiC;EACrDC,IAAI,EAAE,QAAQ;EACdC,UAAU,EAAE;IACVC,OAAO,EAAE;MAACF,IAAI,EAAE;IAAQ,CAAC;IACzBG,KAAK,EAAE;MAACH,IAAI,EAAE,QAAQ;MAAEI,QAAQ,EAAE;IAAI;GACvC;EACDC,QAAQ,EAAE,CAAC,SAAS,CAAC;EACrBC,oBAAoB,EAAE;CACvB;AAED,MAAMC,UAAU,GAAG,sBAAsB;AAEzC,SAAwBC,MAAMA,CAAA;EAC5B,OAAO;IACLC,OAAO,EAAE,QAAQ;IACjBT,IAAI,EAAE,QAAQ;IACdU,UAAU,EAAE,CAAC,QAAQ,EAAE,QAAQ,CAAC;IAChCC,IAAIA,CAACC,GAAe;MAClB,MAAM;QAACC,IAAI;QAAEC;MAAM,CAAC,GAAGF,GAAG;MAC1B,MAAMG,IAAI,GAAGC,SAAS,CAACF,MAAM,CAAC;MAC9BF,GAAG,CAACK,IAAI,CAAC,IAAArB,SAAA,CAAAsB,CAAC,IAAGH,IAAI,SAASF,IAAI,GAAG,CAAC;MAElC,SAASG,SAASA,CAACG,GAA0B;QAC3C,IAAI,OAAOA,GAAG,IAAI,QAAQ,EAAE,OAAO,IAAArB,OAAA,CAAAsB,UAAU,EAACR,GAAG,EAAEO,GAAG,CAACjB,OAAO,EAAEiB,GAAG,CAAChB,KAAK,CAAC;QAC1E,MAAMkB,EAAE,GAAGd,UAAU,CAACe,IAAI,CAACH,GAAG,CAAC;QAC/B,IAAIE,EAAE,EAAE,OAAO,IAAAvB,OAAA,CAAAsB,UAAU,EAACR,GAAG,EAAES,EAAE,CAAC,CAAC,CAAC,EAAEA,EAAE,CAAC,CAAC,CAAC,CAAC;QAC5C,MAAM,IAAIE,KAAK,CAAC,iCAAiC,CAAC;MACpD;IACF,CAAC;IACDC,UAAU,EAAE;MACVC,KAAK,EAAE,CAAC;QAACzB,IAAI,EAAE;MAAQ,CAAC,EAAED,gBAAgB;;GAE7C;AACH;AArBA2B,OAAA,CAAAC,OAAA,GAAAnB,MAAA;AAuBAoB,MAAM,CAACF,OAAO,GAAGlB,MAAM"},"metadata":{},"sourceType":"script","externalDependencies":[]}