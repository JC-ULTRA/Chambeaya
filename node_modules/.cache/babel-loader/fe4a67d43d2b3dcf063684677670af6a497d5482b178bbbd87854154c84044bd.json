{"ast":null,"code":"import axios from \"axios\";\nimport Footer2Component from \"@/components/Footer2Component.vue\";\nimport store from \"@/store\";\nexport default {\n  components: {\n    Footer2Component\n  },\n  data() {\n    return {\n      imagenes: []\n    };\n  },\n  mounted() {\n    this.carga();\n    this.trae();\n  },\n  methods: {\n    carga() {\n      const options = {\n        method: \"GET\",\n        url: \"https://upload.qbits.mx/api/up/get-user-all-images/51\"\n      };\n      axios.request(options).then(response => {\n        this.imagenes = response.data;\n      }).catch(function (error) {\n        console.error(error);\n      });\n    },\n    trae() {\n      const options = {\n        method: \"POST\",\n        url: \"https://access.qbits.mx/api/login\",\n        data: {\n          cred: \"Glez1999_\",\n          hash: 0,\n          user: \"josh.jgp99@gmail.com\"\n        }\n      };\n      axios.request(options).then(function (response) {\n        store.commit(\"setUserData\", response.data);\n      }).catch(function (error) {\n        console.error(error);\n      });\n    },\n    elimina(imagen) {\n      console.log('La imagen se ha eliminado correctamente');\n      // Eliminar la imagen de la matriz de imágenes\n      const index = this.imagenes.indexOf(imagen);\n      this.imagenes.splice(index, 1);\n      console.log(index);\n      const options = {\n        method: 'DELETE',\n        url: `https://upload.qbits.mx/api/up/delete-media/${imagen.id}`,\n        headers: {\n          idMedia: imagen.id,\n          IdUser: store.state.userData.idUser,\n          jwt: store.state.userData.jwt\n        }\n      };\n      axios.request(options).then(function (response) {\n        console.log(response.data);\n      }).catch(function (error) {\n        console.error(error);\n      });\n    },\n    getImagenUrl(fullHttpUploadUrl) {\n      return `https://media.visitanos.net/${fullHttpUploadUrl}`;\n    }\n  }\n};","map":{"version":3,"names":["axios","Footer2Component","store","components","data","imagenes","mounted","carga","trae","methods","options","method","url","request","then","response","catch","error","console","cred","hash","user","commit","elimina","imagen","log","index","indexOf","splice","id","headers","idMedia","IdUser","state","userData","idUser","jwt","getImagenUrl","fullHttpUploadUrl"],"sources":["/home/ubuntu/development/code/practica-vue/src/views/EditImagesView.vue"],"sourcesContent":["<template>\n  <nav class=\"navbar navbar-dark bg-dark\">\n    <div class=\"container-fluid\">\n      <button class=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\">\n        <span class=\"navbar-toggler-icon\"></span>\n      </button>\n    </div>\n  </nav>\n  <div class=\"fondo\">\n    <div class=\"pt-4\">\n      <h1>IMAGES</h1>\n    </div>\n    <div class=\"p-4\">\n      <div class=\"row gap-3\">\n        <div class=\"col col-auto px-0\" v-for=\"imagen in imagenes\" :key=\"imagen.id\">\n          <div class=\"card colorcard\">\n            <div class=\"position-relative\">\n              <img class=\"card-img-top p-2 imagen\" :src=\"getImagenUrl(imagen.fullHttpUploadUrl)\" alt=\"Imagen\">\n              <button type=\"button\" class=\"btn btn-outline-primary boton\" @click=\"elimina(imagen)\">\n              </button>\n            </div>\n            <div class=\"card-body\" style=\"text-align: center;\">\n              <p class=\"card-title usuario\">User: {{ imagen.idUsuario }}</p>\n              <p class=\"card-text name\">Name: {{ imagen.nombreOriginal }}</p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <Footer2Component />\n</template>\n\n<script>\nimport axios from \"axios\";\nimport Footer2Component from \"@/components/Footer2Component.vue\";\nimport store from \"@/store\";\n\nexport default {\n  components: {\n    Footer2Component,\n  },\n  data() {\n    return {\n      imagenes: [],\n    };\n  },\n  mounted() {\n    this.carga();\n    this.trae();\n  },\n  methods: {\n    carga() {\n      const options = {\n        method: \"GET\",\n        url: \"https://upload.qbits.mx/api/up/get-user-all-images/51\",\n      };\n      axios\n        .request(options)\n        .then((response) => {\n          this.imagenes = response.data;\n        })\n        .catch(function (error) {\n          console.error(error);\n        });\n    },\n    trae() {\n      const options = {\n        method: \"POST\",\n        url: \"https://access.qbits.mx/api/login\",\n        data: { cred: \"Glez1999_\", hash: 0, user: \"josh.jgp99@gmail.com\" },\n      };\n      axios\n        .request(options)\n        .then(function (response) {\n          store.commit(\"setUserData\", response.data);\n        })\n        .catch(function (error) {\n          console.error(error);\n        });\n    },\n    elimina(imagen) {\n      console.log('La imagen se ha eliminado correctamente');\n      // Eliminar la imagen de la matriz de imágenes\n      const index = this.imagenes.indexOf(imagen);\n      this.imagenes.splice(index,1);\n      console.log( index )\n      \n      const options = {\n        method: 'DELETE',\n        url: `https://upload.qbits.mx/api/up/delete-media/${imagen.id}`,\n        headers: {\n          idMedia: imagen.id,\n          IdUser: store.state.userData.idUser,\n          jwt: store.state.userData.jwt,\n        },\n      };\n      axios\n        .request(options)\n        .then(function (response) {\n          console.log(response.data);\n        })\n        .catch(function (error) {\n          console.error(error);\n        });\n    },\n    getImagenUrl(fullHttpUploadUrl) {\n      return `https://media.visitanos.net/${fullHttpUploadUrl}`;\n    },\n  },\n};\n</script>\n\n\n<style>\n.fondo {\n    background: #288BA8;\n    padding: 20px;\n}\n\n.colorcard {\n    background: rgba(65, 65, 248, 0.164);\n}\n\n.boton {\n    position: absolute;\n    top: 1rem;\n    right: 1rem;\n    border-radius: 50%;\n    border: 2px solid red;\n    color: red;\n}\n\n.imagen {\n    border-radius: 20px;\n    border: none;\n    max-width: 200px;\n    max-height: 200px;\n    object-fit: cover;\n}\n\n.usuario {\n    color: blueviolet;\n    font-family: Georgia, 'Times New Roman', Times, serif;\n    font-size: 12px;\n}\n\n.name {\n    color: black;\n    font-size: 12px;\n}\n</style>"],"mappings":"AAkCA,OAAOA,KAAI,MAAO,OAAO;AACzB,OAAOC,gBAAe,MAAO,mCAAmC;AAChE,OAAOC,KAAI,MAAO,SAAS;AAE3B,eAAe;EACbC,UAAU,EAAE;IACVF;EACF,CAAC;EACDG,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,QAAQ,EAAE;IACZ,CAAC;EACH,CAAC;EACDC,OAAOA,CAAA,EAAG;IACR,IAAI,CAACC,KAAK,EAAE;IACZ,IAAI,CAACC,IAAI,EAAE;EACb,CAAC;EACDC,OAAO,EAAE;IACPF,KAAKA,CAAA,EAAG;MACN,MAAMG,OAAM,GAAI;QACdC,MAAM,EAAE,KAAK;QACbC,GAAG,EAAE;MACP,CAAC;MACDZ,KAAI,CACDa,OAAO,CAACH,OAAO,EACfI,IAAI,CAAEC,QAAQ,IAAK;QAClB,IAAI,CAACV,QAAO,GAAIU,QAAQ,CAACX,IAAI;MAC/B,CAAC,EACAY,KAAK,CAAC,UAAUC,KAAK,EAAE;QACtBC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC;MACtB,CAAC,CAAC;IACN,CAAC;IACDT,IAAIA,CAAA,EAAG;MACL,MAAME,OAAM,GAAI;QACdC,MAAM,EAAE,MAAM;QACdC,GAAG,EAAE,mCAAmC;QACxCR,IAAI,EAAE;UAAEe,IAAI,EAAE,WAAW;UAAEC,IAAI,EAAE,CAAC;UAAEC,IAAI,EAAE;QAAuB;MACnE,CAAC;MACDrB,KAAI,CACDa,OAAO,CAACH,OAAO,EACfI,IAAI,CAAC,UAAUC,QAAQ,EAAE;QACxBb,KAAK,CAACoB,MAAM,CAAC,aAAa,EAAEP,QAAQ,CAACX,IAAI,CAAC;MAC5C,CAAC,EACAY,KAAK,CAAC,UAAUC,KAAK,EAAE;QACtBC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC;MACtB,CAAC,CAAC;IACN,CAAC;IACDM,OAAOA,CAACC,MAAM,EAAE;MACdN,OAAO,CAACO,GAAG,CAAC,yCAAyC,CAAC;MACtD;MACA,MAAMC,KAAI,GAAI,IAAI,CAACrB,QAAQ,CAACsB,OAAO,CAACH,MAAM,CAAC;MAC3C,IAAI,CAACnB,QAAQ,CAACuB,MAAM,CAACF,KAAK,EAAC,CAAC,CAAC;MAC7BR,OAAO,CAACO,GAAG,CAAEC,KAAI,CAAE;MAEnB,MAAMhB,OAAM,GAAI;QACdC,MAAM,EAAE,QAAQ;QAChBC,GAAG,EAAG,+CAA8CY,MAAM,CAACK,EAAG,EAAC;QAC/DC,OAAO,EAAE;UACPC,OAAO,EAAEP,MAAM,CAACK,EAAE;UAClBG,MAAM,EAAE9B,KAAK,CAAC+B,KAAK,CAACC,QAAQ,CAACC,MAAM;UACnCC,GAAG,EAAElC,KAAK,CAAC+B,KAAK,CAACC,QAAQ,CAACE;QAC5B;MACF,CAAC;MACDpC,KAAI,CACDa,OAAO,CAACH,OAAO,EACfI,IAAI,CAAC,UAAUC,QAAQ,EAAE;QACxBG,OAAO,CAACO,GAAG,CAACV,QAAQ,CAACX,IAAI,CAAC;MAC5B,CAAC,EACAY,KAAK,CAAC,UAAUC,KAAK,EAAE;QACtBC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC;MACtB,CAAC,CAAC;IACN,CAAC;IACDoB,YAAYA,CAACC,iBAAiB,EAAE;MAC9B,OAAQ,+BAA8BA,iBAAkB,EAAC;IAC3D;EACF;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}