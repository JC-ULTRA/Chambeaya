{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-5c6101e4\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"main\", {\n  class: \"container pb-5 hoja\"\n}, null, -1 /* HOISTED */));\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_HeaderComponent = _resolveComponent(\"HeaderComponent\");\n  const _component_FooterComponent = _resolveComponent(\"FooterComponent\");\n  return _openBlock(), _createElementBlock(\"body\", null, [_createElementVNode(\"div\", null, [_createVNode(_component_HeaderComponent), _hoisted_1, _createVNode(_component_FooterComponent, {\n    class: \"down\"\n  })])]);\n}","map":{"version":3,"names":["_createElementVNode","class","_createElementBlock","_createVNode","_component_HeaderComponent","_hoisted_1","_component_FooterComponent"],"sources":["/home/ubuntu/development/code/Proyecto Chambeaya/src/views/LoginView.vue"],"sourcesContent":["<template>\n<body>    \n    <div>\n        <HeaderComponent />\n        <main class=\"container pb-5 hoja\">\n            \n        </main>\n        <FooterComponent class=\"down\" />\n    </div>        \n</body>\n</template>\n\n<script>\nimport axios from 'axios'\nimport store from '@/store'\nimport router from '@/router'\nimport HeaderComponent from '@/components/HeaderComponent.vue'\nimport FooterComponent from '@/components/FooterComponent.vue'\n\nconst emaiRegex = new RegExp(/^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/);\n// nice icons from: https://www.flaticon.com/free-icons/user\nconst apiEndpoint = 'https://access.qbits.mx/api/login'\n\nexport default {\n    components: {\n        HeaderComponent,\n        FooterComponent,\n    },\n    data: function () {\n        return {\n            fieldUser: '',\n            fieldPassword: '',\n            usrErrorMsgClass: 'error-free',\n            passErrorMsgClass: 'error-free',\n            errorText: '',\n            eye:'open-eye',\n            credential: 'password'\n        }\n    },\n    watch: {\n        fieldUser() { \n            this.usrErrorMsgClass=\"error-free\"\n            var flagBadMail = this.fieldUser.length<30 && !emaiRegex.test(this.fieldUser)\n            if(flagBadMail) this.usrErrorMsgClass=\"err-msg\"\n        },\n        fieldPassword() {\n            this.passErrorMsgClass=\"error-free\"\n            var flagBadMail = this.fieldPassword.length<5\n            if(flagBadMail) this.passErrorMsgClass=\"err-msg\"\n        }\n    }, \n    computed : {\n        inhabilitado() {\n            var b = \n                this.fieldUser.length>0 &&\n                this.fieldPassword.length>0 &&\n                this.usrErrorMsgClass==\"error-free\" &&  \n                this.passErrorMsgClass==\"error-free\"\n            return !b\n        }\n    },    \n    methods: {\n        toogle: function() {\n            if(this.eye == 'close-eye') {\n                this.eye='open-eye'\n                this.credential='password'\n            } else {\n                this.eye = 'close-eye'\n                this.credential='text'\n            }\n        },\n        checkCredentials: function() {\n            axios.post(apiEndpoint, {\n                user: this.fieldUser,\n                cred: this.fieldPassword\n            }).then(response => {\n                var ud = response.data; \n                store.commit(\"setUserData\", ud);\n                const target = this.detecta(store.state.userData.role);                        \n                router.push(target);\n            }).catch(error => {\n                this.errorText = error.response ? error.response.data.exceptionLongDescription : error\n                this.$refs.message01.presenta()\n            })\n        },\n        detecta: function(roles) {\n            if(store.state.destination.length>0) {\n                var target = store.state.destination;\n                store.commit('setDestination','');\n                return target;\n            }\n            if (typeof roles === 'string') {\n                return '/';\n            } else {\n                for(var i=0; i<roles.length; i++) {\n                    switch(roles[i].nombre) {\n                        case 'admin': return '/ui/admin'; // rol 1 = administrador\n                        case 'user': return '/'; // rol 2 = usuario comun y corriente\n                        case 'normal': return '/'; // rol 2 = usuario comun y corriente\n                        default: return '/'; // otro rol cualquiera\n                    }\n                } // ends for cycle with switch inside\n            }\n        },\n    }\n}\n</script>\n\n<style scoped>\n.open-eye {\n    background: url(\"@/assets/eye-open.png\") no-repeat left;\n    background-size: 14px;\n    width: 20px;\n    margin-left: 8px;\n}\n.close-eye {\n    background: url(\"@/assets/eye-close.png\") no-repeat left;\n    background-size: 14px;\n    width: 20px;\n    margin-left: 8px;\n}\n.error-free {\n    color: transparent;\n}\n.err-msg {\n    color: red;\n}\n.icon-user {\n    padding-left: 30px;\n    background: url(\"@/assets/user.png\") no-repeat left;\n    background-size: 14px;\n    background-position: 2%50%;\n}\n.icon-key {\n    padding-left: 30px;\n    background: url(\"@/assets/key.png\") no-repeat left;\n    background-size: 14px;\n    background-position: 2%50%;\n}\n.ancho {\n    max-width: 380px;\n    margin: auto;\n    margin-top: 100px;\n}\n.text-align-left {\n    text-align: left;\n}\n.liga {\n    text-decoration: none;\n}\n.liga:hover {\n    text-decoration: underline;\n}\n.color1 {\n    background-color: #D8CFB5;\n}\n.color2 {\n    background-color: #CDC3A7;\n}\n.color3 {\n    background-color: #E0D8B0;\n}\n.color4 {\n    background-color: red;\n}\n.color5 {\n    background-color: #CCB9A5;\n}\n.color6 {\n    background-color: #C3B091;\n}\n.tam {\n    width: 100%;\n    height: 1200px;\n}\n</style>"],"mappings":";;gEAIQA,mBAAA,CAEO;EAFDC,KAAK,EAAC;AAAqB;;;;;uBAHzCC,mBAAA,CAQO,eAPHF,mBAAA,CAMM,cALFG,YAAA,CAAmBC,0BAAA,GACnBC,UAEO,EACPF,YAAA,CAAgCG,0BAAA;IAAfL,KAAK,EAAC;EAAM,G"},"metadata":{},"sourceType":"module","externalDependencies":[]}