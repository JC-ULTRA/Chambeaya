{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, normalizeClass as _normalizeClass, vModelDynamic as _vModelDynamic, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-5c6101e4\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"container pb-5 hoja\"\n};\nconst _hoisted_2 = {\n  class: \"card ancho\"\n};\nconst _hoisted_3 = {\n  class: \"card-body text-align-left\"\n};\nconst _hoisted_4 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"row\"\n}, [/*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"col\"\n}, [/*#__PURE__*/_createElementVNode(\"h1\", null, \"Login\")])], -1 /* HOISTED */));\nconst _hoisted_5 = {\n  class: \"row\"\n};\nconst _hoisted_6 = {\n  class: \"col\"\n};\nconst _hoisted_7 = {\n  class: \"row\"\n};\nconst _hoisted_8 = {\n  class: \"col\"\n};\nconst _hoisted_9 = {\n  class: \"d-flex justify-content-between\"\n};\nconst _hoisted_10 = [\"type\"];\nconst _hoisted_11 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"row\"\n}, [/*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"col\",\n  style: {\n    \"text-align\": \"right\"\n  }\n}, [/*#__PURE__*/_createElementVNode(\"a\", {\n  class: \"liga\",\n  href: \"/ui/forgot\"\n}, \"Forgot password ?\")])], -1 /* HOISTED */));\nconst _hoisted_12 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"hr\", null, null, -1 /* HOISTED */));\nconst _hoisted_13 = {\n  class: \"row\"\n};\nconst _hoisted_14 = {\n  class: \"col\"\n};\nconst _hoisted_15 = {\n  class: \"d-flex justify-content-between\"\n};\nconst _hoisted_16 = [\"disabled\"];\nconst _hoisted_17 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"a\", {\n  class: \"btn btn-warning\",\n  href: \"/ui/register\"\n}, \"Register\", -1 /* HOISTED */));\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_HeaderComponent = _resolveComponent(\"HeaderComponent\");\n  const _component_MessageComponent = _resolveComponent(\"MessageComponent\");\n  const _component_FooterComponent = _resolveComponent(\"FooterComponent\");\n  return _openBlock(), _createElementBlock(\"body\", null, [_createElementVNode(\"div\", null, [_createVNode(_component_HeaderComponent), _createElementVNode(\"main\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_hoisted_4, _createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"div\", _hoisted_6, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    class: \"form-control icon-user\",\n    id: \"text-usr\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => _ctx.fieldUser = $event),\n    placeholder: \"william@email.com\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, _ctx.fieldUser]]), _createElementVNode(\"span\", {\n    class: _normalizeClass(_ctx.usrErrorMsgClass)\n  }, \"Formato de correo inv치lido\", 2 /* CLASS */)])]), _createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"div\", _hoisted_8, [_createElementVNode(\"div\", _hoisted_9, [_withDirectives(_createElementVNode(\"input\", {\n    type: _ctx.credential,\n    class: \"form-control icon-key\",\n    id: \"text-usr\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => _ctx.fieldPassword = $event),\n    placeholder: \"******\"\n  }, null, 8 /* PROPS */, _hoisted_10), [[_vModelDynamic, _ctx.fieldPassword]]), _createElementVNode(\"a\", {\n    class: _normalizeClass(_ctx.eye),\n    href: \"#\",\n    onClick: _cache[2] || (_cache[2] = (...args) => $options.toogle && $options.toogle(...args))\n  }, null, 2 /* CLASS */)]), _createElementVNode(\"span\", {\n    class: _normalizeClass(_ctx.passErrorMsgClass)\n  }, \"Formato de clave inv치lido\", 2 /* CLASS */)])]), _hoisted_11, _hoisted_12, _createElementVNode(\"div\", _hoisted_13, [_createElementVNode(\"div\", _hoisted_14, [_createElementVNode(\"div\", _hoisted_15, [_createElementVNode(\"button\", {\n    class: \"btn btn-success\",\n    disabled: $options.inhabilitado,\n    onClick: _cache[3] || (_cache[3] = (...args) => $options.checkCredentials && $options.checkCredentials(...args))\n  }, \"Login\", 8 /* PROPS */, _hoisted_16), _hoisted_17])])])])]), _createVNode(_component_MessageComponent, {\n    ref: \"message01\",\n    alertType: \"3\",\n    duration: \"4000\",\n    text: _ctx.errorText,\n    iconType: \"1\",\n    style: {\n      \"max-width\": \"600px\"\n    }\n  }, null, 8 /* PROPS */, [\"text\"])]), _createVNode(_component_FooterComponent, {\n    class: \"down\"\n  })])]);\n}","map":{"version":3,"names":["class","_createElementVNode","style","href","_createElementBlock","_createVNode","_component_HeaderComponent","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","type","id","_ctx","fieldUser","$event","placeholder","_normalizeClass","usrErrorMsgClass","_hoisted_7","_hoisted_8","_hoisted_9","credential","fieldPassword","eye","onClick","_cache","args","$options","toogle","passErrorMsgClass","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","disabled","inhabilitado","checkCredentials","_hoisted_16","_hoisted_17","_component_MessageComponent","ref","alertType","duration","text","errorText","iconType","_component_FooterComponent"],"sources":["/home/ubuntu/development/code/Proyecto Chambeaya/src/views/LoginView.vue"],"sourcesContent":["<template>\n    <body>\n        <div>\n            <HeaderComponent />\n            <main class=\"container pb-5 hoja\">\n                <div class=\"card ancho\">\n                    <div class=\"card-body text-align-left\">\n                        <div class=\"row\">\n                            <div class=\"col\">\n                                <h1>Login</h1>\n                            </div>\n                        </div>\n                        <div class=\"row\">\n                            <div class=\"col\">\n                                <input type=\"text\" class=\"form-control icon-user\" id=\"text-usr\" v-model=\"fieldUser\"\n                                    placeholder=\"william@email.com\" />\n                                <span :class=\"usrErrorMsgClass\">Formato de correo inv치lido</span>\n                            </div>\n                        </div>\n                        <div class=\"row\">\n                            <div class=\"col\">\n                                <div class=\"d-flex justify-content-between\">\n                                    <input :type=\"credential\" class=\"form-control icon-key\" id=\"text-usr\"\n                                        v-model=\"fieldPassword\" placeholder=\"******\" />\n                                    <a :class=\"eye\" href=\"#\" @click=\"toogle\"></a>\n                                </div>\n                                <span :class=\"passErrorMsgClass\">Formato de clave inv치lido</span>\n                            </div>\n                        </div>\n                        <div class=\"row\">\n                            <div class=\"col\" style=\"text-align: right;\">\n                                <a class=\"liga\" href=\"/ui/forgot\">Forgot password ?</a>\n                            </div>\n                        </div>\n                        <hr />\n                        <div class=\"row\">\n                            <div class=\"col\">\n                                <div class=\"d-flex justify-content-between\">\n                                    <button class=\"btn btn-success\" :disabled=inhabilitado\n                                        @click=\"checkCredentials\">Login</button>\n                                    <a class=\"btn btn-warning\" href=\"/ui/register\">Register</a>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                <MessageComponent \n                ref=\"message01\" \n                alertType=3 \n                duration=4000 \n                :text=errorText iconType=1\n                    style=\"max-width: 600px;\" />\n\n            </main>\n            <FooterComponent class=\"down\" />\n        </div>\n    </body>\n</template>\n\n<script>\nimport axios from 'axios'\nimport store from '@/store'\nimport router from '@/router'\nimport HeaderComponent from '@/components/HeaderComponent.vue'\nimport FooterComponent from '@/components/FooterComponent.vue'\n\n\nconst emaiRegex = new RegExp(/^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/);\n// nice icons from: https://www.flaticon.com/free-icons/user\nconst apiEndpoint = 'https://access.qbits.mx/api/login'\n\nexport default {\n    components: {\n        HeaderComponent,\n        FooterComponent,\n    },\n    data: function () {\n        return {\n            fieldUser: '',\n            fieldPassword: '',\n            usrErrorMsgClass: 'error-free',\n            passErrorMsgClass: 'error-free',\n            errorText: '',\n            eye: 'open-eye',\n            credential: 'password'\n        }\n    },\n    watch: {\n        fieldUser() {\n            this.usrErrorMsgClass = \"error-free\"\n            var flagBadMail = this.fieldUser.length < 30 && !emaiRegex.test(this.fieldUser)\n            if (flagBadMail) this.usrErrorMsgClass = \"err-msg\"\n        },\n        fieldPassword() {\n            this.passErrorMsgClass = \"error-free\"\n            var flagBadMail = this.fieldPassword.length < 5\n            if (flagBadMail) this.passErrorMsgClass = \"err-msg\"\n        }\n    },\n    computed: {\n        inhabilitado() {\n            var b =\n                this.fieldUser.length > 0 &&\n                this.fieldPassword.length > 0 &&\n                this.usrErrorMsgClass == \"error-free\" &&\n                this.passErrorMsgClass == \"error-free\"\n            return !b\n        },\n        computed: {\n    username() {\n        return this.$store.state.userData.username;\n    }\n}\n    },\n    methods: {\n        toogle: function () {\n            if (this.eye == 'close-eye') {\n                this.eye = 'open-eye'\n                this.credential = 'password'\n            } else {\n                this.eye = 'close-eye'\n                this.credential = 'text'\n            }\n        },\n        checkCredentials: function () {\n    axios.post(apiEndpoint, {\n        user: this.fieldUser,\n        cred: this.fieldPassword\n    }).then(response => {\n        var ud = response.data;\n        store.commit(\"setUserData\", ud);\n        localStorage.setItem('userData', JSON.stringify(ud));\n        const target = this.detecta(store.state.userData.role);\n        router.push(target);\n    }).catch(error => {\n        this.errorText = error.response ? error.response.data.exceptionLongDescription : error\n        this.$refs.message01.presenta()\n    })\n},\n        detecta: function (roles) {\n            if (store.state.destination.length > 0) {\n                var target = store.state.destination;\n                store.commit('setDestination', '');\n                return target;\n            }\n            if (typeof roles === 'string') {\n                return '/';\n            } else {\n                for (var i = 0; i < roles.length; i++) {\n                    switch (roles[i].nombre) {\n                        case 'admin': return '/ui/admin'; // rol 1 = administrador\n                        case 'user': return '/'; // rol 2 = usuario comun y corriente\n                        case 'normal': return '/'; // rol 2 = usuario comun y corriente\n                        default: return '/'; // otro rol cualquiera\n                    }\n                } // ends for cycle with switch inside\n            }\n        },\n    }\n}\n</script>\n\n<style scoped>\n.open-eye {\n    background: url(\"@/assets/eye-open.png\") no-repeat left;\n    background-size: 14px;\n    width: 20px;\n    margin-left: 8px;\n}\n\n.close-eye {\n    background: url(\"@/assets/eye-close.png\") no-repeat left;\n    background-size: 14px;\n    width: 20px;\n    margin-left: 8px;\n}\n\n.error-free {\n    color: transparent;\n}\n\n.err-msg {\n    color: red;\n}\n\n.icon-user {\n    padding-left: 30px;\n    background: url(\"@/assets/user.png\") no-repeat left;\n    background-size: 14px;\n    background-position: 2%50%;\n}\n\n.icon-key {\n    padding-left: 30px;\n    background: url(\"@/assets/key.png\") no-repeat left;\n    background-size: 14px;\n    background-position: 2%50%;\n}\n\n.ancho {\n    max-width: 380px;\n    margin: auto;\n    margin-top: 100px;\n}\n\n.text-align-left {\n    text-align: left;\n}\n\n.liga {\n    text-decoration: none;\n}\n\n.liga:hover {\n    text-decoration: underline;\n}\n\n.color1 {\n    background-color: #D8CFB5;\n}\n\n.color2 {\n    background-color: #CDC3A7;\n}\n\n.color3 {\n    background-color: #E0D8B0;\n}\n\n.color4 {\n    background-color: red;\n}\n\n.color5 {\n    background-color: #CCB9A5;\n}\n\n.color6 {\n    background-color: #C3B091;\n}\n\n.tam {\n    width: 100%;\n    height: 1200px;\n}\n\nbody {\n    background-image: url('../assets/oficios.jpg');\n    background-size: cover;\n    position: relative;\n}\n\n\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}