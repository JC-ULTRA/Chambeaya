{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from \"axios\";\nimport store from \"@/store\";\nimport router from \"@/router\";\nimport def from \"@/assets/danger.jpg\";\nimport ImageCropper from \"@/components/ImageCropper.vue\";\nexport default {\n  name: \"UploadIMG\",\n  props: {\n    multiple: {\n      type: Boolean,\n      default: false\n    } // this is same as: multiple:false (but I am not sure)\n  },\n\n  data() {\n    return {\n      userId: store.state.userData.idUser,\n      jwt: store.state.userData.jwt,\n      profilePicture: def,\n      aspectRadio: 3 / 4,\n      loading: false,\n      loader: 'ancho',\n      dragover: false,\n      uploadedFiles: [],\n      imgSelected: false,\n      cropperSelected: false,\n      buttonDisabled: true,\n      errorText: ''\n    };\n  },\n  components: {\n    ImageCropper\n  },\n  methods: {\n    isMobile() {\n      return /android|webos|iphone|ipad|ipod|blackberry|opera mini|iemobile/i.test(navigator.userAgent.toLowerCase());\n    },\n    resetImage() {\n      this.profilePicture = \"\";\n      this.imageBlob = \"\";\n      this.cropperSelected = \"\";\n    },\n    saveImage: function () {\n      this.loader = 'loader';\n      this.loading = true;\n      let formd = new FormData();\n      formd.append(\"file\", this.imageBlob, this.imageBlob.name);\n      const headers = {\n        \"Content-Type\": \"multipart/form-data\",\n        \"Access-Control-Allow-Origin\": \"*\",\n        jwt: this.jwt,\n        idUser: store.state.userData.idUser\n      };\n      axios.post(\"https://upload.qbits.mx/api/up/upload-image\", formd, {\n        headers\n      }).then(response => {\n        response;\n        this.loading = false;\n        this.loader = 'ancho';\n        this.resetImage();\n        router.push(\"/ui/official-doc\");\n      }).catch(error => {\n        this.loading = false;\n        this.loader = 'ancho';\n        this.resetImage();\n        this.errorText = error.response ? error.response.data.exceptionLongDescription : error;\n        this.$refs.message01.presenta();\n      });\n    },\n    cargaIneoff: function () {\n      this.loader = 'loader';\n      this.loading = true;\n      let formd = new FormData();\n      formd.append(\"file\", this.imageBlob, this.imageBlob.name);\n      const headers = {\n        \"Content-Type\": \"multipart/form-data\",\n        \"Access-Control-Allow-Origin\": \"*\",\n        jwt: this.jwt,\n        idUser: store.state.userData.idUser\n      };\n      axios.post(\"https://upload.qbits.mx/api/up/upload-identification\", formd, {\n        headers\n      }).then(response => {\n        response;\n        this.loading = false;\n        this.loader = 'ancho';\n        this.resetImage();\n        router.push(\"/ui/official-doc\");\n      }).catch(error => {\n        this.loading = false;\n        this.loader = 'ancho';\n        this.resetImage();\n        this.errorText = error.response ? error.response.data.exceptionLongDescription : error;\n        this.$refs.message01.presenta();\n      });\n    },\n    procesa(imagen, imageBlob) {\n      this.profilePicture = imagen;\n      this.imageBlob = imageBlob;\n      this.imgSelected = true;\n      this.cropperSelected = true;\n      this.buttonDisabled = false;\n    },\n    imgError(msg) {\n      this.errorText = msg;\n      this.$refs.message01.presenta();\n    },\n    cancelaImagen() {\n      if (!this.cropperSelected) {\n        this.imgSelected = false;\n      }\n      this.cropperSelected = false;\n    },\n    cancelaEnElHijo() {\n      this.buttonDisabled = true;\n    },\n    fireChooser() {\n      this.$refs.imageCropper.fireChooser();\n    },\n    removeFile(fileName) {\n      // Find the index of the\n      const index = this.uploadedFiles.findIndex(file => file.name === fileName);\n      // If file is in uploaded files remove it\n      if (index > -1) this.uploadedFiles.splice(index, 1);\n    },\n    onDrop(e) {\n      this.dragover = false;\n      // If there are already uploaded files remove them\n      if (this.uploadedFiles.length > 0) this.uploadedFiles = [];\n      // If user has uploaded multiple files but the component is not multiple throw error\n      if (!this.multiple && e.dataTransfer.files.length > 1) {\n        this.$store.dispatch(\"addNotification\", {\n          message: \"Only one file can be uploaded at a time..\",\n          colour: \"error\"\n        });\n      } else {\n        this.imgSelected = this.$refs.imageCropper.setImageDrag(e.dataTransfer.files.item(0));\n      }\n    }\n  }\n};","map":{"version":3,"names":["axios","store","router","def","ImageCropper","name","props","multiple","type","Boolean","default","data","userId","state","userData","idUser","jwt","profilePicture","aspectRadio","loading","loader","dragover","uploadedFiles","imgSelected","cropperSelected","buttonDisabled","errorText","components","methods","isMobile","test","navigator","userAgent","toLowerCase","resetImage","imageBlob","saveImage","formd","FormData","append","headers","post","then","response","push","catch","error","exceptionLongDescription","$refs","message01","presenta","cargaIneoff","procesa","imagen","imgError","msg","cancelaImagen","cancelaEnElHijo","fireChooser","imageCropper","removeFile","fileName","index","findIndex","file","splice","onDrop","e","length","dataTransfer","files","$store","dispatch","message","colour","setImageDrag","item"],"sources":["/home/ubuntu/development/code/jc/Chambeaya/src/views/UploadImageView.vue"],"sourcesContent":["<template>\n  <div class=\"content\">\n    <div class=\"centra\">\n      <h1>Cargar una ID Valida</h1>\n  \n      <div class=\"card\">\n  \n        <div v-if=\"isMobile() || this.imgSelected == true\">\n          <div class=\"img-user\" @click=\"fireChooser\">\n            <img\n              class=\"croppedImage\"\n              v-if=\"profilePicture\"\n              :src=\"profilePicture\"\n              alt=\"Cropped Image\"\n            />\n            <hr/>\n            <a class=\"btn btn-warning\">Cambiar Imagen</a>\n          </div>\n        </div>\n  \n        <div v-else @click=\"fireChooser\">\n          <div class=\"card fondo-card\"\n            @drop.prevent=\"onDrop($event)\"\n            @dragover.prevent=\"dragover = true\"\n            @dragenter.prevent=\"dragover = true\"\n            @dragleave.prevent=\"dragover = false\"\n            :class=\"{ 'drag': dragover }\">\n            <div>\n              <div class=\"row\">\n                <div class=\"col\">\n                  <br/>\n                  <i class=\"fa-solid fa-cloud-arrow-up fa-3x\"></i>\n                </div>\n              </div>\n              <div class=\"row\">\n                <div class=\"col\">\n                  <p><br/>Arrastre y suelte una imagen en esta Ã¡rea<br/>O haga click para seleccionar una</p>\n                </div>\n              </div>            \n  \n            \n            </div>       \n          </div>\n        </div>\n  \n        <div style=\"margin: 20px;\">\n          <div class=\"row\">\n            <div class=\"col\">\n              <button\n                :disabled=buttonDisabled\n                @click=\"cargaIneoff\"\n                class=\"btn btn-success\"\n                prepend-icon=\"mdi-cloud-upload\">\n                Guardar\n              </button>\n            </div>\n            <div class=\"col\">\n              <a\n                class=\"btn btn-danger\"\n                :disabled=loading\n                href=\"/ui/official-doc\">\n                Cancelar\n              </a>\n            </div>\n          </div>\n        </div>\n      </div>\n  \n      <imageCropper\n        :asp-rad=\"aspectRadio\"\n        ref=\"imageCropper\"\n        @img-error=\"imgError\"\n        @procesa-imagen=\"procesa\"\n        @cancela-imagen=\"cancelaImagen\"\n        @cancela-en-el-hijo=\"cancelaEnElHijo\" />\n  \n        <div :class=loader />\n\n        <MessageComponent \n            ref=\"message01\" \n            alertType=3\n            duration=4000 \n            :text=errorText \n            iconType=1\n            style=\"max-width: 600px;\" />  \n\n    </div>   \n    <FooterComponent class=\"down\" />\n  \n  </div>\n  </template>\n  \n<script>\n  import axios from \"axios\"\n  import store from \"@/store\"\n  import router from \"@/router\"\n  \n  import def from \"@/assets/danger.jpg\"\n  import ImageCropper from \"@/components/ImageCropper.vue\"\n  \n  export default {\n    name: \"UploadIMG\",\n    \n    props: {\n      multiple: {\n        type: Boolean,\n        default: false,\n      }, // this is same as: multiple:false (but I am not sure)\n    },\n    data() {\n      return {\n        userId: store.state.userData.idUser,\n        jwt: store.state.userData.jwt,\n        profilePicture: def,\n        aspectRadio: 3 / 4,\n        loading: false,\n        loader: 'ancho',\n        dragover: false,\n        uploadedFiles: [],\n        imgSelected: false,\n        cropperSelected: false,\n        buttonDisabled:true,\n        errorText:''\n      };\n    },\n    components: {\n      ImageCropper\n    },\n    methods: {\n      isMobile() {      \n        return /android|webos|iphone|ipad|ipod|blackberry|opera mini|iemobile/i.test(\n          navigator.userAgent.toLowerCase()\n        );\n      },\n      resetImage() {\n        this.profilePicture = \"\";\n        this.imageBlob = \"\";\n        this.cropperSelected=\"\";\n      },\n      saveImage: function () {\n        this.loader = 'loader'\n        this.loading = true;\n        let formd = new FormData();\n        formd.append(\"file\", this.imageBlob, this.imageBlob.name);\n        const headers = {\n          \"Content-Type\": \"multipart/form-data\",\n          \"Access-Control-Allow-Origin\": \"*\",\n          jwt: this.jwt,\n          idUser: store.state.userData.idUser,\n        };\n  \n        axios\n          .post(\"https://upload.qbits.mx/api/up/upload-image\", formd, { headers })\n          .then((response) => {\n            response;\n            this.loading = false;\n            this.loader = 'ancho'\n            this.resetImage();\n            router.push(\"/ui/official-doc\");\n          })\n          .catch((error) => {\n            this.loading = false;\n            this.loader = 'ancho'\n            this.resetImage();\n            this.errorText = error.response ? error.response.data.exceptionLongDescription : error\n            this.$refs.message01.presenta()\n          });\n      },\n      cargaIneoff: function () {\n        this.loader = 'loader'\n        this.loading = true;\n        let formd = new FormData();\n        formd.append(\"file\", this.imageBlob, this.imageBlob.name);\n        const headers = {\n          \"Content-Type\": \"multipart/form-data\",\n          \"Access-Control-Allow-Origin\": \"*\",\n          jwt: this.jwt,\n          idUser: store.state.userData.idUser,\n        };\n  \n        axios\n          .post(\"https://upload.qbits.mx/api/up/upload-identification\", formd, { headers })\n          .then((response) => {\n            response;\n            this.loading = false;\n            this.loader = 'ancho'\n            this.resetImage();\n            router.push(\"/ui/official-doc\");\n          })\n          .catch((error) => {\n            this.loading = false;\n            this.loader = 'ancho'\n            this.resetImage();\n            this.errorText = error.response ? error.response.data.exceptionLongDescription : error\n            this.$refs.message01.presenta()\n          });\n      },\n      procesa(imagen, imageBlob) {\n        this.profilePicture = imagen;\n        this.imageBlob = imageBlob;      \n        this.imgSelected = true;\n        this.cropperSelected = true;\n        this.buttonDisabled = false;\n      },\n      imgError(msg) {\n        this.errorText = msg\n        this.$refs.message01.presenta()\n      },\n      cancelaImagen() {\n        if (!this.cropperSelected) {\n          this.imgSelected = false;        \n        }\n        this.cropperSelected = false;            \n      },\n      cancelaEnElHijo() {\n        this.buttonDisabled=true;\n      },\n      fireChooser() {\n        this.$refs.imageCropper.fireChooser();\n      },\n      removeFile(fileName) {\n        // Find the index of the\n        const index = this.uploadedFiles.findIndex(\n          (file) => file.name === fileName\n        );\n        // If file is in uploaded files remove it\n        if (index > -1) this.uploadedFiles.splice(index, 1);\n      },\n      onDrop(e) {\n        this.dragover = false;\n        // If there are already uploaded files remove them\n        if (this.uploadedFiles.length > 0) this.uploadedFiles = []\n        // If user has uploaded multiple files but the component is not multiple throw error\n        if (!this.multiple && e.dataTransfer.files.length > 1) {\n          this.$store.dispatch(\"addNotification\", {\n            message: \"Only one file can be uploaded at a time..\",\n            colour: \"error\",\n          });\n        }\n        else {\n          this.imgSelected = this.$refs.imageCropper.setImageDrag(e.dataTransfer.files.item(0))\n        }\n      },\n    },\n  };\n  </script>\n  \n<style scoped>\n  .centra {\n    max-width: 600px;\n    margin: auto;\n    padding-top: 10%;\n    padding-bottom: 200px;\n  }\n  .fondo-card {\n    background-color: #efefff;\n  }\n  .croppedImage {\n    display: block;\n    width: 80%;\n    height: auto;\n  }\n  .img-user {\n    text-align: center;\n    padding: 20px;\n  }\n  img {\n    height: 300px;\n    margin: 0 auto;\n  }\n  .drag {\n    background-color: gray;\n    color: white;\n  }\n  </style>"],"mappings":";AA6FE,OAAOA,KAAI,MAAO,OAAM;AACxB,OAAOC,KAAI,MAAO,SAAQ;AAC1B,OAAOC,MAAK,MAAO,UAAS;AAE5B,OAAOC,GAAE,MAAO,qBAAoB;AACpC,OAAOC,YAAW,MAAO,+BAA8B;AAEvD,eAAe;EACbC,IAAI,EAAE,WAAW;EAEjBC,KAAK,EAAE;IACLC,QAAQ,EAAE;MACRC,IAAI,EAAEC,OAAO;MACbC,OAAO,EAAE;IACX,CAAC,CAAE;EACL,CAAC;;EACDC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,MAAM,EAAEX,KAAK,CAACY,KAAK,CAACC,QAAQ,CAACC,MAAM;MACnCC,GAAG,EAAEf,KAAK,CAACY,KAAK,CAACC,QAAQ,CAACE,GAAG;MAC7BC,cAAc,EAAEd,GAAG;MACnBe,WAAW,EAAE,IAAI,CAAC;MAClBC,OAAO,EAAE,KAAK;MACdC,MAAM,EAAE,OAAO;MACfC,QAAQ,EAAE,KAAK;MACfC,aAAa,EAAE,EAAE;MACjBC,WAAW,EAAE,KAAK;MAClBC,eAAe,EAAE,KAAK;MACtBC,cAAc,EAAC,IAAI;MACnBC,SAAS,EAAC;IACZ,CAAC;EACH,CAAC;EACDC,UAAU,EAAE;IACVvB;EACF,CAAC;EACDwB,OAAO,EAAE;IACPC,QAAQA,CAAA,EAAG;MACT,OAAO,gEAAgE,CAACC,IAAI,CAC1EC,SAAS,CAACC,SAAS,CAACC,WAAW,EAAC,CACjC;IACH,CAAC;IACDC,UAAUA,CAAA,EAAG;MACX,IAAI,CAACjB,cAAa,GAAI,EAAE;MACxB,IAAI,CAACkB,SAAQ,GAAI,EAAE;MACnB,IAAI,CAACX,eAAe,GAAC,EAAE;IACzB,CAAC;IACDY,SAAS,EAAE,SAAAA,CAAA,EAAY;MACrB,IAAI,CAAChB,MAAK,GAAI,QAAO;MACrB,IAAI,CAACD,OAAM,GAAI,IAAI;MACnB,IAAIkB,KAAI,GAAI,IAAIC,QAAQ,EAAE;MAC1BD,KAAK,CAACE,MAAM,CAAC,MAAM,EAAE,IAAI,CAACJ,SAAS,EAAE,IAAI,CAACA,SAAS,CAAC9B,IAAI,CAAC;MACzD,MAAMmC,OAAM,GAAI;QACd,cAAc,EAAE,qBAAqB;QACrC,6BAA6B,EAAE,GAAG;QAClCxB,GAAG,EAAE,IAAI,CAACA,GAAG;QACbD,MAAM,EAAEd,KAAK,CAACY,KAAK,CAACC,QAAQ,CAACC;MAC/B,CAAC;MAEDf,KAAI,CACDyC,IAAI,CAAC,6CAA6C,EAAEJ,KAAK,EAAE;QAAEG;MAAQ,CAAC,EACtEE,IAAI,CAAEC,QAAQ,IAAK;QAClBA,QAAQ;QACR,IAAI,CAACxB,OAAM,GAAI,KAAK;QACpB,IAAI,CAACC,MAAK,GAAI,OAAM;QACpB,IAAI,CAACc,UAAU,EAAE;QACjBhC,MAAM,CAAC0C,IAAI,CAAC,kBAAkB,CAAC;MACjC,CAAC,EACAC,KAAK,CAAEC,KAAK,IAAK;QAChB,IAAI,CAAC3B,OAAM,GAAI,KAAK;QACpB,IAAI,CAACC,MAAK,GAAI,OAAM;QACpB,IAAI,CAACc,UAAU,EAAE;QACjB,IAAI,CAACR,SAAQ,GAAIoB,KAAK,CAACH,QAAO,GAAIG,KAAK,CAACH,QAAQ,CAAChC,IAAI,CAACoC,wBAAuB,GAAID,KAAI;QACrF,IAAI,CAACE,KAAK,CAACC,SAAS,CAACC,QAAQ,EAAC;MAChC,CAAC,CAAC;IACN,CAAC;IACDC,WAAW,EAAE,SAAAA,CAAA,EAAY;MACvB,IAAI,CAAC/B,MAAK,GAAI,QAAO;MACrB,IAAI,CAACD,OAAM,GAAI,IAAI;MACnB,IAAIkB,KAAI,GAAI,IAAIC,QAAQ,EAAE;MAC1BD,KAAK,CAACE,MAAM,CAAC,MAAM,EAAE,IAAI,CAACJ,SAAS,EAAE,IAAI,CAACA,SAAS,CAAC9B,IAAI,CAAC;MACzD,MAAMmC,OAAM,GAAI;QACd,cAAc,EAAE,qBAAqB;QACrC,6BAA6B,EAAE,GAAG;QAClCxB,GAAG,EAAE,IAAI,CAACA,GAAG;QACbD,MAAM,EAAEd,KAAK,CAACY,KAAK,CAACC,QAAQ,CAACC;MAC/B,CAAC;MAEDf,KAAI,CACDyC,IAAI,CAAC,sDAAsD,EAAEJ,KAAK,EAAE;QAAEG;MAAQ,CAAC,EAC/EE,IAAI,CAAEC,QAAQ,IAAK;QAClBA,QAAQ;QACR,IAAI,CAACxB,OAAM,GAAI,KAAK;QACpB,IAAI,CAACC,MAAK,GAAI,OAAM;QACpB,IAAI,CAACc,UAAU,EAAE;QACjBhC,MAAM,CAAC0C,IAAI,CAAC,kBAAkB,CAAC;MACjC,CAAC,EACAC,KAAK,CAAEC,KAAK,IAAK;QAChB,IAAI,CAAC3B,OAAM,GAAI,KAAK;QACpB,IAAI,CAACC,MAAK,GAAI,OAAM;QACpB,IAAI,CAACc,UAAU,EAAE;QACjB,IAAI,CAACR,SAAQ,GAAIoB,KAAK,CAACH,QAAO,GAAIG,KAAK,CAACH,QAAQ,CAAChC,IAAI,CAACoC,wBAAuB,GAAID,KAAI;QACrF,IAAI,CAACE,KAAK,CAACC,SAAS,CAACC,QAAQ,EAAC;MAChC,CAAC,CAAC;IACN,CAAC;IACDE,OAAOA,CAACC,MAAM,EAAElB,SAAS,EAAE;MACzB,IAAI,CAAClB,cAAa,GAAIoC,MAAM;MAC5B,IAAI,CAAClB,SAAQ,GAAIA,SAAS;MAC1B,IAAI,CAACZ,WAAU,GAAI,IAAI;MACvB,IAAI,CAACC,eAAc,GAAI,IAAI;MAC3B,IAAI,CAACC,cAAa,GAAI,KAAK;IAC7B,CAAC;IACD6B,QAAQA,CAACC,GAAG,EAAE;MACZ,IAAI,CAAC7B,SAAQ,GAAI6B,GAAE;MACnB,IAAI,CAACP,KAAK,CAACC,SAAS,CAACC,QAAQ,EAAC;IAChC,CAAC;IACDM,aAAaA,CAAA,EAAG;MACd,IAAI,CAAC,IAAI,CAAChC,eAAe,EAAE;QACzB,IAAI,CAACD,WAAU,GAAI,KAAK;MAC1B;MACA,IAAI,CAACC,eAAc,GAAI,KAAK;IAC9B,CAAC;IACDiC,eAAeA,CAAA,EAAG;MAChB,IAAI,CAAChC,cAAc,GAAC,IAAI;IAC1B,CAAC;IACDiC,WAAWA,CAAA,EAAG;MACZ,IAAI,CAACV,KAAK,CAACW,YAAY,CAACD,WAAW,EAAE;IACvC,CAAC;IACDE,UAAUA,CAACC,QAAQ,EAAE;MACnB;MACA,MAAMC,KAAI,GAAI,IAAI,CAACxC,aAAa,CAACyC,SAAS,CACvCC,IAAI,IAAKA,IAAI,CAAC3D,IAAG,KAAMwD,QAAO,CAChC;MACD;MACA,IAAIC,KAAI,GAAI,CAAC,CAAC,EAAE,IAAI,CAACxC,aAAa,CAAC2C,MAAM,CAACH,KAAK,EAAE,CAAC,CAAC;IACrD,CAAC;IACDI,MAAMA,CAACC,CAAC,EAAE;MACR,IAAI,CAAC9C,QAAO,GAAI,KAAK;MACrB;MACA,IAAI,IAAI,CAACC,aAAa,CAAC8C,MAAK,GAAI,CAAC,EAAE,IAAI,CAAC9C,aAAY,GAAI,EAAC;MACzD;MACA,IAAI,CAAC,IAAI,CAACf,QAAO,IAAK4D,CAAC,CAACE,YAAY,CAACC,KAAK,CAACF,MAAK,GAAI,CAAC,EAAE;QACrD,IAAI,CAACG,MAAM,CAACC,QAAQ,CAAC,iBAAiB,EAAE;UACtCC,OAAO,EAAE,2CAA2C;UACpDC,MAAM,EAAE;QACV,CAAC,CAAC;MACJ,OACK;QACH,IAAI,CAACnD,WAAU,GAAI,IAAI,CAACyB,KAAK,CAACW,YAAY,CAACgB,YAAY,CAACR,CAAC,CAACE,YAAY,CAACC,KAAK,CAACM,IAAI,CAAC,CAAC,CAAC;MACtF;IACF;EACF;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}