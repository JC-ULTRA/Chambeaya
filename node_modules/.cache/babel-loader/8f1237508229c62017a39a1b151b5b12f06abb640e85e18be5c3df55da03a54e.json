{"ast":null,"code":"import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, withModifiers as _withModifiers, normalizeClass as _normalizeClass, resolveComponent as _resolveComponent, createVNode as _createVNode, createStaticVNode as _createStaticVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-ce523256\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"content\"\n};\nconst _hoisted_2 = {\n  class: \"centra\"\n};\nconst _hoisted_3 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h1\", null, \"Seleccione una imagen\", -1 /* HOISTED */));\nconst _hoisted_4 = {\n  class: \"card\"\n};\nconst _hoisted_5 = {\n  key: 0\n};\nconst _hoisted_6 = [\"src\"];\nconst _hoisted_7 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"hr\", null, null, -1 /* HOISTED */));\nconst _hoisted_8 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"a\", {\n  class: \"btn btn-warning\"\n}, \"Cambiar Imagen\", -1 /* HOISTED */));\nconst _hoisted_9 = /*#__PURE__*/_createStaticVNode(\"<div data-v-ce523256><div class=\\\"row\\\" data-v-ce523256><div class=\\\"col\\\" data-v-ce523256><br data-v-ce523256><i class=\\\"fa-solid fa-cloud-arrow-up fa-3x\\\" data-v-ce523256></i></div></div><div class=\\\"row\\\" data-v-ce523256><div class=\\\"col\\\" data-v-ce523256><p data-v-ce523256><br data-v-ce523256>Arrastre y suelte una imagen en esta área<br data-v-ce523256>O haga click para seleccionar una</p></div></div></div>\", 1);\nconst _hoisted_10 = [_hoisted_9];\nconst _hoisted_11 = {\n  style: {\n    \"margin\": \"20px\"\n  }\n};\nconst _hoisted_12 = {\n  class: \"row\"\n};\nconst _hoisted_13 = {\n  class: \"col\"\n};\nconst _hoisted_14 = [\"disabled\"];\nconst _hoisted_15 = {\n  class: \"col\"\n};\nconst _hoisted_16 = [\"disabled\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_imageCropper = _resolveComponent(\"imageCropper\");\n  const _component_MessageComponent = _resolveComponent(\"MessageComponent\");\n  const _component_FooterComponent = _resolveComponent(\"FooterComponent\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_hoisted_3, _createElementVNode(\"div\", _hoisted_4, [$options.isMobile() || this.imgSelected == true ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [_createElementVNode(\"div\", {\n    class: \"img-user\",\n    onClick: _cache[0] || (_cache[0] = (...args) => $options.fireChooser && $options.fireChooser(...args))\n  }, [$data.profilePicture ? (_openBlock(), _createElementBlock(\"img\", {\n    key: 0,\n    class: \"croppedImage\",\n    src: $data.profilePicture,\n    alt: \"Cropped Image\"\n  }, null, 8 /* PROPS */, _hoisted_6)) : _createCommentVNode(\"v-if\", true), _hoisted_7, _hoisted_8])])) : (_openBlock(), _createElementBlock(\"div\", {\n    key: 1,\n    onClick: _cache[5] || (_cache[5] = (...args) => $options.fireChooser && $options.fireChooser(...args))\n  }, [_createElementVNode(\"div\", {\n    class: _normalizeClass([\"card fondo-card\", {\n      'drag': $data.dragover\n    }]),\n    onDrop: _cache[1] || (_cache[1] = _withModifiers($event => $options.onDrop($event), [\"prevent\"])),\n    onDragover: _cache[2] || (_cache[2] = _withModifiers($event => $data.dragover = true, [\"prevent\"])),\n    onDragenter: _cache[3] || (_cache[3] = _withModifiers($event => $data.dragover = true, [\"prevent\"])),\n    onDragleave: _cache[4] || (_cache[4] = _withModifiers($event => $data.dragover = false, [\"prevent\"]))\n  }, _hoisted_10, 34 /* CLASS, HYDRATE_EVENTS */)])), _createElementVNode(\"div\", _hoisted_11, [_createElementVNode(\"div\", _hoisted_12, [_createElementVNode(\"div\", _hoisted_13, [_createElementVNode(\"button\", {\n    disabled: $data.buttonDisabled,\n    onClick: _cache[6] || (_cache[6] = (...args) => $options.saveImage && $options.saveImage(...args)),\n    class: \"btn btn-success\",\n    \"prepend-icon\": \"mdi-cloud-upload\"\n  }, \" Guardar \", 8 /* PROPS */, _hoisted_14)]), _createElementVNode(\"div\", _hoisted_15, [_createElementVNode(\"a\", {\n    class: \"btn btn-danger\",\n    disabled: $data.loading,\n    href: \"/ui/official-doc\"\n  }, \" Cancelar \", 8 /* PROPS */, _hoisted_16)])])])]), _createVNode(_component_imageCropper, {\n    \"asp-rad\": $data.aspectRadio,\n    ref: \"imageCropper\",\n    onImgError: $options.imgError,\n    onProcesaImagen: $options.procesa,\n    onCancelaImagen: $options.cancelaImagen,\n    onCancelaEnElHijo: $options.cancelaEnElHijo\n  }, null, 8 /* PROPS */, [\"asp-rad\", \"onImgError\", \"onProcesaImagen\", \"onCancelaImagen\", \"onCancelaEnElHijo\"]), _createElementVNode(\"div\", {\n    class: _normalizeClass($data.loader)\n  }, null, 2 /* CLASS */), _createVNode(_component_MessageComponent, {\n    ref: \"message01\",\n    alertType: \"3\",\n    duration: \"4000\",\n    text: $data.errorText,\n    iconType: \"1\",\n    style: {\n      \"max-width\": \"600px\"\n    }\n  }, null, 8 /* PROPS */, [\"text\"])]), _createVNode(_component_FooterComponent, {\n    class: \"down\"\n  })]);\n}","map":{"version":3,"names":["class","_createElementVNode","_hoisted_9","style","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","$options","isMobile","imgSelected","_hoisted_5","onClick","_cache","args","fireChooser","$data","profilePicture","src","alt","_hoisted_7","_hoisted_8","_normalizeClass","dragover","onDrop","_withModifiers","$event","onDragover","onDragenter","onDragleave","_hoisted_11","_hoisted_12","_hoisted_13","disabled","buttonDisabled","saveImage","_hoisted_14","_hoisted_15","loading","href","_hoisted_16","_createVNode","_component_imageCropper","aspectRadio","ref","onImgError","imgError","onProcesaImagen","procesa","onCancelaImagen","cancelaImagen","onCancelaEnElHijo","cancelaEnElHijo","loader","_component_MessageComponent","alertType","duration","text","errorText","iconType","_component_FooterComponent"],"sources":["/home/ubuntu/development/code/Proyecto Chambeaya/src/views/UploadImageView.vue"],"sourcesContent":["<template>\n  <div class=\"content\">\n    <div class=\"centra\">\n      <h1>Seleccione una imagen</h1>\n  \n      <div class=\"card\">\n  \n        <div v-if=\"isMobile() || this.imgSelected == true\">\n          <div class=\"img-user\" @click=\"fireChooser\">\n            <img\n              class=\"croppedImage\"\n              v-if=\"profilePicture\"\n              :src=\"profilePicture\"\n              alt=\"Cropped Image\"\n            />\n            <hr/>\n            <a class=\"btn btn-warning\">Cambiar Imagen</a>\n          </div>\n        </div>\n  \n        <div v-else @click=\"fireChooser\">\n          <div class=\"card fondo-card\"\n            @drop.prevent=\"onDrop($event)\"\n            @dragover.prevent=\"dragover = true\"\n            @dragenter.prevent=\"dragover = true\"\n            @dragleave.prevent=\"dragover = false\"\n            :class=\"{ 'drag': dragover }\">\n            <div>\n              <div class=\"row\">\n                <div class=\"col\">\n                  <br/>\n                  <i class=\"fa-solid fa-cloud-arrow-up fa-3x\"></i>\n                </div>\n              </div>\n              <div class=\"row\">\n                <div class=\"col\">\n                  <p><br/>Arrastre y suelte una imagen en esta área<br/>O haga click para seleccionar una</p>\n                </div>\n              </div>            \n  \n        \n            </div>       \n          </div>\n        </div>\n  \n        <div style=\"margin: 20px;\">\n          <div class=\"row\">\n            <div class=\"col\">\n              <button\n                :disabled=buttonDisabled\n                @click=\"saveImage\"\n                class=\"btn btn-success\"\n                prepend-icon=\"mdi-cloud-upload\">\n                Guardar\n              </button>\n            </div>\n            <div class=\"col\">\n              <a\n                class=\"btn btn-danger\"\n                :disabled=loading\n                href=\"/ui/official-doc\">\n                Cancelar\n              </a>\n            </div>\n          </div>\n        </div>\n      </div>\n  \n      <imageCropper\n        :asp-rad=\"aspectRadio\"\n        ref=\"imageCropper\"\n        @img-error=\"imgError\"\n        @procesa-imagen=\"procesa\"\n        @cancela-imagen=\"cancelaImagen\"\n        @cancela-en-el-hijo=\"cancelaEnElHijo\" />\n  \n        <div :class=loader />\n\n        <MessageComponent \n            ref=\"message01\" \n            alertType=3\n            duration=4000 \n            :text=errorText \n            iconType=1\n            style=\"max-width: 600px;\" />  \n\n    </div>   \n    <FooterComponent class=\"down\" />\n   \n  </div>\n  </template>\n  \n<script>\n  import axios from \"axios\"\n  import store from \"@/store\"\n  import router from \"@/router\"\n  \n  import def from \"@/assets/danger.jpg\"\n  import ImageCropper from \"@/components/ImageCropper.vue\"\n  \n  export default {\n    name: \"UploadIMG\",\n    \n    props: {\n      multiple: {\n        type: Boolean,\n        default: false,\n      }, // this is same as: multiple:false (but I am not sure)\n    },\n    data() {\n      return {\n        userId: store.state.userData.idUser,\n        jwt: store.state.userData.jwt,\n        profilePicture: def,\n        aspectRadio: 3 / 4,\n        loading: false,\n        loader: 'ancho',\n        dragover: false,\n        uploadedFiles: [],\n        imgSelected: false,\n        cropperSelected: false,\n        buttonDisabled:true,\n        errorText:''\n      };\n    },\n    components: {\n      ImageCropper\n    },\n    methods: {\n      isMobile() {      \n        return /android|webos|iphone|ipad|ipod|blackberry|opera mini|iemobile/i.test(\n          navigator.userAgent.toLowerCase()\n        );\n      },\n      resetImage() {\n        this.profilePicture = \"\";\n        this.imageBlob = \"\";\n        this.cropperSelected=\"\";\n      },\n      saveImage: function () {\n        this.loader = 'loader'\n        this.loading = true;\n        let formd = new FormData();\n        formd.append(\"file\", this.imageBlob, this.imageBlob.name);\n        const headers = {\n          \"Content-Type\": \"multipart/form-data\",\n          \"Access-Control-Allow-Origin\": \"*\",\n          jwt: this.jwt,\n          idUser: store.state.userData.idUser,\n        };\n  \n        axios\n          .post(\"https://upload.qbits.mx/api/up/upload-image\", formd, { headers })\n          .then((response) => {\n            response;\n            this.loading = false;\n            this.loader = 'ancho'\n            this.resetImage();\n            router.push(\"/ui/official-doc\");\n          })\n          .catch((error) => {\n            this.loading = false;\n            this.loader = 'ancho'\n            this.resetImage();\n            this.errorText = error.response ? error.response.data.exceptionLongDescription : error\n            this.$refs.message01.presenta()\n          });\n      },\n      cargaIneoff: function () {\n        this.loader = 'loader'\n        this.loading = true;\n        let formd = new FormData();\n        formd.append(\"file\", this.imageBlob, this.imageBlob.name);\n        const headers = {\n          \"Content-Type\": \"multipart/form-data\",\n          \"Access-Control-Allow-Origin\": \"*\",\n          jwt: this.jwt,\n          idUser: store.state.userData.idUser,\n        };\n  \n        axios\n          .post(\"https://upload.qbits.mx/api/up/upload-identification\", formd, { headers })\n          .then((response) => {\n            response;\n            this.loading = false;\n            this.loader = 'ancho'\n            this.resetImage();\n            router.push(\"/ui/official-doc\");\n          })\n          .catch((error) => {\n            this.loading = false;\n            this.loader = 'ancho'\n            this.resetImage();\n            this.errorText = error.response ? error.response.data.exceptionLongDescription : error\n            this.$refs.message01.presenta()\n          });\n      },\n      procesa(imagen, imageBlob) {\n        this.profilePicture = imagen;\n        this.imageBlob = imageBlob;      \n        this.imgSelected = true;\n        this.cropperSelected = true;\n        this.buttonDisabled = false;\n      },\n      imgError(msg) {\n        this.errorText = msg\n        this.$refs.message01.presenta()\n      },\n      cancelaImagen() {\n        if (!this.cropperSelected) {\n          this.imgSelected = false;        \n        }\n        this.cropperSelected = false;            \n      },\n      cancelaEnElHijo() {\n        this.buttonDisabled=true;\n      },\n      fireChooser() {\n        this.$refs.imageCropper.fireChooser();\n      },\n      removeFile(fileName) {\n        // Find the index of the\n        const index = this.uploadedFiles.findIndex(\n          (file) => file.name === fileName\n        );\n        // If file is in uploaded files remove it\n        if (index > -1) this.uploadedFiles.splice(index, 1);\n      },\n      onDrop(e) {\n        this.dragover = false;\n        // If there are already uploaded files remove them\n        if (this.uploadedFiles.length > 0) this.uploadedFiles = []\n        // If user has uploaded multiple files but the component is not multiple throw error\n        if (!this.multiple && e.dataTransfer.files.length > 1) {\n          this.$store.dispatch(\"addNotification\", {\n            message: \"Only one file can be uploaded at a time..\",\n            colour: \"error\",\n          });\n        }\n        else {\n          this.imgSelected = this.$refs.imageCropper.setImageDrag(e.dataTransfer.files.item(0))\n        }\n      },\n    },\n  };\n  </script>\n  \n<style scoped>\n  .centra {\n    max-width: 600px;\n    margin: auto;\n    padding-top: 10%;\n    padding-bottom: 200px;\n  }\n  .fondo-card {\n    background-color: #efefff;\n  }\n  .croppedImage {\n    display: block;\n    width: 80%;\n    height: auto;\n  }\n  .img-user {\n    text-align: center;\n    padding: 20px;\n  }\n  img {\n    height: 300px;\n    margin: 0 auto;\n  }\n  .drag {\n    background-color: gray;\n    color: white;\n  }\n  </style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}