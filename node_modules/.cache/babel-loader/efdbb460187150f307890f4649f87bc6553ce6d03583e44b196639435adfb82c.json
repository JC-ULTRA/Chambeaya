{"ast":null,"code":"import axios from 'axios';\nimport Footer2Component from '@/components/Footer2Component.vue';\n//import store from '@/store'\n\nasync function obtenerToken() {\n  try {\n    const response = await axios.post('https://upload.qbits.mx/api/auth/login', {\n      email: 'remep28446@mitigado.com',\n      password: 'Zonic01#'\n    });\n    return response.data.token;\n  } catch (error) {\n    console.error(error);\n  }\n}\nasync function eliminarImagen(idImg, idUser) {\n  const token = await obtenerToken();\n  try {\n    const response = await axios.delete(`https://upload.qbits.mx/api/up/delete-image/${idImg}/${idUser}`, {\n      headers: {\n        'Authorization': `Bearer ${token}`\n      }\n    });\n    console.log(response.data.message);\n  } catch (error) {\n    console.error(error);\n  }\n}\nexport default {\n  components: {\n    Footer2Component\n  },\n  data() {\n    return {\n      imagenes: []\n    };\n  },\n  mounted() {\n    this.obtenerImagenes();\n  },\n  methods: {\n    obtenerImagenes() {\n      axios.get('https://upload.qbits.mx/api/up/get-user-all-images/51').then(response => {\n        this.imagenes = response.data;\n      }).catch(error => {\n        console.log(error);\n      });\n    },\n    getImagenUrl(fullHttpUploadUrl) {\n      return `https://media.visitanos.net/image${fullHttpUploadUrl}`;\n    },\n    async borrarImagen(idImg, idUser, imagen) {\n      try {\n        await eliminarImagen(idImg, idUser);\n        console.log('La imagen se ha eliminado correctamente');\n        // Eliminar la imagen de la matriz de imágenes\n        const index = this.imagenes.indexOf(imagen);\n        this.imagenes.splice(imagen);\n      } catch (error) {\n        console.error(error);\n      }\n    }\n  }\n};","map":{"version":3,"names":["axios","Footer2Component","obtenerToken","response","post","email","password","data","token","error","console","eliminarImagen","idImg","idUser","delete","headers","log","message","components","imagenes","mounted","obtenerImagenes","methods","get","then","catch","getImagenUrl","fullHttpUploadUrl","borrarImagen","imagen","index","indexOf","splice"],"sources":["/home/ubuntu/development/code/practica-vue/src/views/EditImagesView.vue"],"sourcesContent":["<template>\n    <nav class=\"navbar navbar-dark bg-dark\">\n        <div class=\"container-fluid\">\n            <button class=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\">\n                <span class=\"navbar-toggler-icon\"></span>\n            </button>\n        </div>\n    </nav>\n    <div class=\"fondo\">\n        <div class=\"pt-4\">\n            <h1>IMAGES</h1>\n        </div>\n        <div class=\"p-4\">\n            <div class=\"row gap-3\">\n                <div class=\"col col-auto px-0\" v-for=\"imagen in imagenes\" :key=\"imagen.id\">\n                    <div class=\"card colorcard\">\n                        <div class=\"position-relative\">\n                            <img class=\"card-img-top p-2 imagen\" :src=\"getImagenUrl(imagen.fullHttpUploadUrl)\" alt=\"Imagen\">\n                            <button type=\"button\" class=\"btn btn-outline-primary boton\" @click=\"borrarImagen(imagen.id, imagen.idUsuario, token, imagen)\">\n                                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" fill=\"currentColor\"\n                                    class=\"bi bi-trash3-fill\" viewBox=\"0 0 16 16\">\n                                    <path\n                                        d=\"M11 1.5v1h3.5a.5.5 0 0 1 0 1h-.538l-.853 10.66A2 2 0 0 1 11.115 16h-6.23a2 2 0 0 1-1.994-1.84L2.038 3.5H1.5a.5.5 0 0 1 0-1H5v-1A1.5 1.5 0 0 1 6.5 0h3A1.5 1.5 0 0 1 11 1.5Zm-5 0v1h4v-1a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5ZM4.5 5.029l.5 8.5a.5.5 0 1 0 .998-.06l-.5-8.5a.5.5 0 1 0-.998.06Zm6.53-.528a.5.5 0 0 0-.528.47l-.5 8.5a.5.5 0 0 0 .998.058l.5-8.5a.5.5 0 0 0-.47-.528ZM8 4.5a.5.5 0 0 0-.5.5v8.5a.5.5 0 0 0 1 0V5a.5.5 0 0 0-.5-.5Z\" />\n                                </svg>\n                            </button>\n                        </div>\n                        <div class=\"card-body\" style=\"text-align: center;\">\n                            <p class=\"card-title usuario\">User: {{ imagen.idUsuario }}</p>\n                            <p class=\"card-text name\">Name: {{ imagen.nombreOriginal }}</p>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <Footer2Component />\n</template>\n\n<script>\nimport axios from 'axios';\nimport Footer2Component from '@/components/Footer2Component.vue';\n//import store from '@/store'\n\nasync function obtenerToken() {\n  try {\n    const response = await axios.post('https://upload.qbits.mx/api/auth/login', {\n      email: 'remep28446@mitigado.com',\n      password: 'Zonic01#'\n    });\n    return response.data.token;\n  } catch (error) {\n    console.error(error);\n  }\n}\n\nasync function eliminarImagen(idImg, idUser) {\n  const token = await obtenerToken();\n  try {\n    const response = await axios.delete(`https://upload.qbits.mx/api/up/delete-image/${idImg}/${idUser}`, {\n      headers: {\n        'Authorization': `Bearer ${token}`,\n      },\n    });\n    console.log(response.data.message);\n  } catch (error) {\n    console.error(error);\n  }\n}\n\nexport default {\n  components: {\n    Footer2Component,\n  },\n  data() {\n    return {\n      imagenes: [],\n    }\n  },\n  mounted() {\n    this.obtenerImagenes();\n  },\n  methods: {\n    obtenerImagenes() {\n      axios.get('https://upload.qbits.mx/api/up/get-user-all-images/51')\n        .then(response => {\n          this.imagenes = response.data;\n        })\n        .catch(error => {\n          console.log(error);\n        });\n    },\n    getImagenUrl(fullHttpUploadUrl) {\n      return `https://media.visitanos.net/image${fullHttpUploadUrl}`;\n    },\n    async borrarImagen(idImg, idUser, imagen) {\n      try {\n        await eliminarImagen(idImg, idUser);\n        console.log('La imagen se ha eliminado correctamente');\n        // Eliminar la imagen de la matriz de imágenes\n        const index = this.imagenes.indexOf(imagen);\n        this.imagenes.splice(imagen);\n      } catch (error) {\n        console.error(error);\n      }\n    }\n  }\n}\n\n</script>\n\n<style>\n.fondo {\n    background: #288BA8;\n    padding: 20px;\n}\n\n.colorcard {\n    background: rgba(65, 65, 248, 0.164);\n}\n\n.boton {\n    position: absolute;\n    top: 1rem;\n    right: 1rem;\n    border-radius: 50%;\n    border: 2px solid red;\n    color: red;\n}\n\n.imagen {\n    border-radius: 20px;\n    border: none;\n    max-width: 200px;\n    max-height: 200px;\n    object-fit: cover;\n}\n\n.usuario {\n    color: blueviolet;\n    font-family: Georgia, 'Times New Roman', Times, serif;\n    font-size: 12px;\n}\n\n.name {\n    color: black;\n    font-size: 12px;\n}\n</style>"],"mappings":"AAuCA,OAAOA,KAAI,MAAO,OAAO;AACzB,OAAOC,gBAAe,MAAO,mCAAmC;AAChE;;AAEA,eAAeC,YAAYA,CAAA,EAAG;EAC5B,IAAI;IACF,MAAMC,QAAO,GAAI,MAAMH,KAAK,CAACI,IAAI,CAAC,wCAAwC,EAAE;MAC1EC,KAAK,EAAE,yBAAyB;MAChCC,QAAQ,EAAE;IACZ,CAAC,CAAC;IACF,OAAOH,QAAQ,CAACI,IAAI,CAACC,KAAK;EAC5B,EAAE,OAAOC,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC;EACtB;AACF;AAEA,eAAeE,cAAcA,CAACC,KAAK,EAAEC,MAAM,EAAE;EAC3C,MAAML,KAAI,GAAI,MAAMN,YAAY,EAAE;EAClC,IAAI;IACF,MAAMC,QAAO,GAAI,MAAMH,KAAK,CAACc,MAAM,CAAE,+CAA8CF,KAAM,IAAGC,MAAO,EAAC,EAAE;MACpGE,OAAO,EAAE;QACP,eAAe,EAAG,UAASP,KAAM;MACnC;IACF,CAAC,CAAC;IACFE,OAAO,CAACM,GAAG,CAACb,QAAQ,CAACI,IAAI,CAACU,OAAO,CAAC;EACpC,EAAE,OAAOR,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC;EACtB;AACF;AAEA,eAAe;EACbS,UAAU,EAAE;IACVjB;EACF,CAAC;EACDM,IAAIA,CAAA,EAAG;IACL,OAAO;MACLY,QAAQ,EAAE;IACZ;EACF,CAAC;EACDC,OAAOA,CAAA,EAAG;IACR,IAAI,CAACC,eAAe,EAAE;EACxB,CAAC;EACDC,OAAO,EAAE;IACPD,eAAeA,CAAA,EAAG;MAChBrB,KAAK,CAACuB,GAAG,CAAC,uDAAuD,EAC9DC,IAAI,CAACrB,QAAO,IAAK;QAChB,IAAI,CAACgB,QAAO,GAAIhB,QAAQ,CAACI,IAAI;MAC/B,CAAC,EACAkB,KAAK,CAAChB,KAAI,IAAK;QACdC,OAAO,CAACM,GAAG,CAACP,KAAK,CAAC;MACpB,CAAC,CAAC;IACN,CAAC;IACDiB,YAAYA,CAACC,iBAAiB,EAAE;MAC9B,OAAQ,oCAAmCA,iBAAkB,EAAC;IAChE,CAAC;IACD,MAAMC,YAAYA,CAAChB,KAAK,EAAEC,MAAM,EAAEgB,MAAM,EAAE;MACxC,IAAI;QACF,MAAMlB,cAAc,CAACC,KAAK,EAAEC,MAAM,CAAC;QACnCH,OAAO,CAACM,GAAG,CAAC,yCAAyC,CAAC;QACtD;QACA,MAAMc,KAAI,GAAI,IAAI,CAACX,QAAQ,CAACY,OAAO,CAACF,MAAM,CAAC;QAC3C,IAAI,CAACV,QAAQ,CAACa,MAAM,CAACH,MAAM,CAAC;MAC9B,EAAE,OAAOpB,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC;MACtB;IACF;EACF;AACF"},"metadata":{},"sourceType":"module","externalDependencies":[]}